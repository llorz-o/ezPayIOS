{"version":3,"file":"js/949.f39624bd.js","mappings":"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","sources":["webpack://ez_pay/./src/views/user_pay_psw/index.vue?e73e","webpack://ez_pay/src/views/user_pay_psw/index.vue","webpack://ez_pay/./src/views/user_pay_psw/index.vue?28b8","webpack://ez_pay/./src/views/user_pay_psw/index.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page page-user-pay-psw\"},[_c('van-form',{on:{\"submit\":_vm.onSubmit}},[(_vm.$root.userInfo.secPasswordStatus)?_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"旧密码\")]),_c('van-field',{attrs:{\"type\":_vm.showPsw ? 'digit' : 'password',\"autocomplete\":\"new-password\",\"maxlength\":\"6\",\"focusable\":\"true\",\"placeholder\":\"请输入原密码\"},model:{value:(_vm.form.oldSecPassword),callback:function ($$v) {_vm.$set(_vm.form, \"oldSecPassword\", $$v)},expression:\"form.oldSecPassword\"}},[_c('van-button',{staticClass:\"btn\",attrs:{\"slot\":\"extra\",\"icon\":_vm.showPsw ? 'eye-o' : 'closed-eye',\"native-type\":\"button\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.showPsw = !_vm.showPsw}},slot:\"extra\"})],1),_c('div',{staticClass:\"tip\"},[_vm._v(\"资金密码为6位纯数字\")])],1):_vm._e(),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"新密码\")]),_c('van-field',{attrs:{\"type\":_vm.showPsw2 ? 'digit' : 'password',\"autocomplete\":\"new-password\",\"maxlength\":\"6\",\"focusable\":\"true\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.form.newSecPassword),callback:function ($$v) {_vm.$set(_vm.form, \"newSecPassword\", $$v)},expression:\"form.newSecPassword\"}},[_c('van-button',{staticClass:\"btn\",attrs:{\"slot\":\"extra\",\"icon\":_vm.showPsw2 ? 'eye-o' : 'closed-eye',\"native-type\":\"button\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.showPsw2 = !_vm.showPsw2}},slot:\"extra\"})],1),_c('div',{staticClass:\"tip\"},[_vm._v(\"资金密码为6位纯数字\")])],1),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"label\"},[_vm._v(\"确认新密码\")]),_c('van-field',{attrs:{\"type\":_vm.showPsw3 ? 'digit' : 'password',\"autocomplete\":\"new-password\",\"maxlength\":\"6\",\"focusable\":\"true\",\"placeholder\":\"请确认新密码\"},model:{value:(_vm.form.confirmSecPassword),callback:function ($$v) {_vm.$set(_vm.form, \"confirmSecPassword\", $$v)},expression:\"form.confirmSecPassword\"}},[_c('van-button',{staticClass:\"btn\",attrs:{\"slot\":\"extra\",\"icon\":_vm.showPsw3 ? 'eye-o' : 'closed-eye',\"native-type\":\"button\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.showPsw3 = !_vm.showPsw3}},slot:\"extra\"})],1),_c('div',{staticClass:\"tip\"},[_vm._v(\"资金密码为6位纯数字\")])],1),_c('van-button',{staticClass:\"primary block\",class:{\n        disabled:\n          !_vm.form.newSecPassword ||\n          !_vm.form.confirmSecPassword ||\n          (_vm.$root.userInfo.secPasswordStatus ? !_vm.form.oldSecPassword : false),\n      },attrs:{\"native-type\":\"submit\"}},[_vm._v(\" 确定 \")])],1),_c('van-dialog',{staticClass:\"warning\",attrs:{\"close-on-click-overlay\":\"\",\"show-cancel-button\":\"\"},on:{\"confirm\":_vm.onConfirm},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"fail\"}})]},proxy:true}]),model:{value:(_vm.showFailDialog),callback:function ($$v) {_vm.showFailDialog=$$v},expression:\"showFailDialog\"}},[_vm._v(\" 为保障你的资金安全，资金密码修改后 \"),_c('span',[_vm._v(\"2小时\")]),_vm._v(\" 以内不允许交易 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page page-user-pay-psw\">\n    <van-form @submit=\"onSubmit\">\n      <div v-if=\"$root.userInfo.secPasswordStatus\" class=\"form-item\">\n        <div class=\"label\">旧密码</div>\n        <van-field v-model=\"form.oldSecPassword\"\n                   :type=\"showPsw ? 'digit' : 'password'\"\n                   autocomplete=\"new-password\"\n                   maxlength=\"6\"\n                   focusable=\"true\"\n                   placeholder=\"请输入原密码\"\n        >\n          <van-button\n            slot=\"extra\"\n            :icon=\"showPsw ? 'eye-o' : 'closed-eye'\"\n            class=\"btn\"\n            native-type=\"button\"\n            size=\"mini\"\n            @click=\"showPsw = !showPsw\"\n          >\n          </van-button>\n        </van-field>\n        <div class=\"tip\">资金密码为6位纯数字</div>\n      </div>\n      <div class=\"form-item\">\n        <div class=\"label\">新密码</div>\n        <van-field v-model=\"form.newSecPassword\"\n                   :type=\"showPsw2 ? 'digit' : 'password'\"\n                   autocomplete=\"new-password\"\n                   maxlength=\"6\"\n                   focusable=\"true\"\n                   placeholder=\"请输入新密码\"\n        >\n          <van-button\n            slot=\"extra\"\n            :icon=\"showPsw2 ? 'eye-o' : 'closed-eye'\"\n            class=\"btn\"\n            native-type=\"button\"\n            size=\"mini\"\n            @click=\"showPsw2 = !showPsw2\"\n          >\n          </van-button>\n        </van-field>\n        <div class=\"tip\">资金密码为6位纯数字</div>\n      </div>\n      <div class=\"form-item\">\n        <div class=\"label\">确认新密码</div>\n        <van-field v-model=\"form.confirmSecPassword\"\n                   :type=\"showPsw3 ? 'digit' : 'password'\"\n                   autocomplete=\"new-password\"\n                   maxlength=\"6\"\n                   focusable=\"true\"\n                   placeholder=\"请确认新密码\"\n        >\n          <van-button\n            slot=\"extra\"\n            :icon=\"showPsw3 ? 'eye-o' : 'closed-eye'\"\n            class=\"btn\"\n            native-type=\"button\"\n            size=\"mini\"\n            @click=\"showPsw3 = !showPsw3\"\n          >\n          </van-button>\n        </van-field>\n        <div class=\"tip\">资金密码为6位纯数字</div>\n      </div>\n\n      <van-button\n        :class=\"{\n          disabled:\n            !form.newSecPassword ||\n            !form.confirmSecPassword ||\n            ($root.userInfo.secPasswordStatus ? !form.oldSecPassword : false),\n        }\"\n        class=\"primary block\"\n        native-type=\"submit\"\n      >\n        确定\n      </van-button>\n    </van-form>\n\n    <van-dialog\n      v-model=\"showFailDialog\"\n      class=\"warning\"\n      close-on-click-overlay\n      show-cancel-button\n      @confirm=\"onConfirm\"\n    >\n      <template #title>\n        <van-icon name=\"fail\"/>\n      </template>\n      为保障你的资金安全，资金密码修改后\n      <span>2小时</span>\n      以内不允许交易\n    </van-dialog>\n  </div>\n</template>\n\n<script>\nimport {resetSecPwd, setSecPwd} from \"@/apis/user\";\n\nexport default {\n  data() {\n    return {\n      showFailDialog: false,\n      form: {\n        oldSecPassword: \"\",\n        newSecPassword: \"\",\n        confirmSecPassword: \"\",\n      },\n      showPsw: false,\n      showPsw2: false,\n      showPsw3: false,\n    };\n  },\n  created() {\n    this.$root.$emit(\"root:set-topbar\", [\"left-back\"]);\n    this.$root.$emit(\n      \"root:set-title\",\n      this.$root.userInfo.secPasswordStatus ? \" 修改资金密码\" : \"设置资金密码\"\n    );\n  },\n  methods: {\n    onSubmit() {\n      if (!/^\\d{6}$/.test(this.form.newSecPassword))\n        return this.$toast.fail(\"请输入6位数字资金密码\");\n      if (this.form.newSecPassword != this.form.confirmSecPassword)\n        return this.$toast.fail(\"两次输入的密码不一致\");\n      if (this.$root.userInfo.secPasswordStatus) {\n        this.showFailDialog = true;\n      } else {\n        this.onConfirm();\n      }\n    },\n    onConfirm() {\n      if (this.$root.userInfo.secPasswordStatus) {\n        resetSecPwd({\n          oldSecPassword: this.form.oldSecPassword,\n          newSecPassword: this.form.newSecPassword,\n        }).then(({ok, msg}) => {\n          if (ok) {\n            this.$toast.success(msg);\n            this.$router.back();\n          } else {\n            this.$toast.fail(msg);\n          }\n        });\n      } else {\n        setSecPwd({securePassword: this.form.newSecPassword}).then(\n          ({ok, msg}) => {\n            if (ok) {\n              this.$root.userInfo.secPasswordStatus = true;\n              this.$toast.success(msg);\n              this.$router.back();\n            } else {\n              this.$toast.fail(msg);\n            }\n          }\n        );\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.page-user-pay-psw {\n  .van-form {\n    padding: 12px;\n  }\n\n  .form-item {\n    .label {\n      font-size: 14;\n      color: #333333ff;\n      margin-top: 12px;\n    }\n\n    .van-field {\n      background-color: #f0f0f0ff;\n      border-radius: 5px;\n      margin: 5px 0;\n\n      .btn {\n        padding: 0 15px;\n        font-size: 25px;\n        background-color: transparent;\n        border: none;\n      }\n    }\n\n    .tip {\n      font-size: 9px;\n      color: #999999ff;\n    }\n  }\n\n  .warning {\n    .van-dialog__header {\n      color: #6f5bfeff;\n      font-size: 15px;\n\n      .van-icon-fail {\n        font-size: 30px;\n        width: 32px;\n        height: 32px;\n        line-height: 32px;\n        background-color: $theme;\n        border-radius: 50%;\n        color: #fff;\n      }\n    }\n\n    .van-dialog__content {\n      text-align: center;\n      font-size: 12px;\n      color: #333333ff;\n      line-height: 1.8;\n      padding: 10px 20px;\n\n      span {\n        color: #fb2222ff;\n      }\n    }\n\n    .van-dialog__confirm {\n      color: $theme;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4945aa4a&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","onSubmit","$root","userInfo","_v","attrs","showPsw","model","value","form","callback","$$v","$set","expression","$event","slot","_e","showPsw2","showPsw3","class","disabled","newSecPassword","confirmSecPassword","secPasswordStatus","oldSecPassword","onConfirm","scopedSlots","_u","key","fn","proxy","showFailDialog","staticRenderFns","data","created","methods","resetSecPwd","msg","_this","setSecPwd","securePassword","component"],"sourceRoot":""}