"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[3675],{13675:function(t,e,n){n.r(e),n.d(e,{default:function(){return l}});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-banks"},[n("div",{staticClass:"titles"},[n("div",{staticClass:"num"},[t._v(" 我的银行卡 "),n("span",{staticClass:"secondary"},[t._v(" （共"+t._s(t.bank.list.length)+"张） ")])]),n("van-button",{attrs:{icon:"plus","icon-position":"left",replace:"",to:"/add_payment/1"+(t.isMerchant?"?m=1":"")}},[t._v(" 添加银行卡 ")])],1),n("div",{staticClass:"collection"},t._l(t.bank.list,(function(e,r){return n("van-swipe-cell",{key:r,scopedSlots:t._u([{key:"right",fn:function(){return[n("van-button",{attrs:{square:"",text:"解绑",type:"danger"},on:{click:function(n){return t.unbind(e.id)}}})]},proxy:!0}],null,!0)},[n("div",{class:"card bg"+r},[n("van-image",{attrs:{src:t.$root.getImageUrl(e.logoImg),round:""}}),n("div",{staticClass:"bankInfo"},[n("div",{staticClass:"top"},[n("span",{staticClass:"bankName"},[t._v(" "+t._s(t.bankIdMappingName[e.bankId])+" ")]),n("span",{staticClass:"bankNum"},[t._v(" ****"+t._s(e.bankNo.slice(-4))+" ")])]),n("div",{staticClass:"bankStatus"},[t._v("可转账")])])],1)])})),1)])},o=[],a=n(39873),s=n(7067),i=n(49749),u=(n(83040),n(85827),n(41539),n(53045)),c=n(39766),p=n(89828),d={mixins:[p.mi],computed:{bank:function(){return this.payments.bank},bankIdMappingName:function(){return this.$root.banks.reduce((function(t,e){return(0,i.Z)((0,i.Z)({},t),{},(0,s.Z)({},e.bankId,e.bankName))}),{})}},created:function(){this.$root.$emit("root:set-topbar",["left-back","notices","customer-service"])},methods:{unbind:function(t){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function n(){var r,o,a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,c.D)(e);case 2:if(r=n.sent,r){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,(0,c.x)(e);case 7:if(o=n.sent,!o||6!==o.length){n.next=15;break}return n.next=11,(0,u.k4)({id:t,securePassword:o});case 11:a=n.sent,s=a.ok,i=a.msg,s?e.$root.loadPayments():e.$toast.fail(i);case 15:case"end":return n.stop()}}),n)})))()}}},f=d,m=n(1001),h=(0,m.Z)(f,r,o,!1,null,null,null),l=h.exports},39766:function(t,e,n){n.d(e,{D:function(){return s},x:function(){return a}});var r=n(39873),o=(n(83040),n(41539),n(32564),n(53045)),a=function(t){return t.$toast("请输入资金密码"),new Promise((function(e,n){t.$root.showPassowordKeyboard=!0,t.$root.$once("root:global-password",function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},s=function(t){return t.$root.userInfo&&t.$root.userInfo.isGoogleAuthenticator?(t.$toast("请输入Google安全码"),new Promise((function(e,n){setTimeout((function(){t.$root.showPassowordKeyboard=!0,t.$root.$once("root:global-password",function(){var n=(0,r.Z)(regeneratorRuntime.mark((function n(r){var a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r&&"close-by-route-change"!==r){n.next=2;break}return n.abrupt("return",e(!1));case 2:return n.next=4,(0,o.Wg)({safeCode:r});case 4:a=n.sent,s=a.ok,i=a.msg,s?e(!0):(e(!1),t.$toast.fail(i));case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}),0)}))):Promise.resolve(!0)}},89828:function(t,e,n){n.d(e,{RY:function(){return p},VM:function(){return d},fN:function(){return c},mi:function(){return f}});var r=n(49749),o=n(52336),a=n(39873),s=(n(56977),n(54678),n(32564),n(83040),n(12879)),i=n(75461),u=["ok","data","msg"],c={data:function(){return{cryptoAccountInfo:{address:"",otcTicker:""}}},methods:{businessGetAccountInfo:function(t){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function n(){var a,i,c,p,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,s.bb)({type:t});case 2:return a=n.sent,i=a.ok,c=a.data,p=a.msg,d=(0,o.Z)(a,u),i?(e.cryptoAccountInfo=c,e.updateQRcode()):e.$toast(p),n.abrupt("return",(0,r.Z)({ok:i,data:c,msg:p},d));case 9:case"end":return n.stop()}}),n)})))()},updateQRcode:function(t){i.toDataURL(t||this.cryptoAccountInfo.address).then((function(t){var e=document.querySelector(".QRcode");e&&e.setAttribute("src",t)}))}}},p={computed:{isCryptoMerchant:function(){return"1"===this.$route.query.m},amICryptoMerchant:function(){return 1===this.$root.userInfo.BusinessStatus},ApiPath:function(){return this.isCryptoMerchant?"Business":""},BuyerApiPath:function(){return this.isCryptoMerchant&&this.amICryptoMerchant?"Business":""}}},d={data:function(){return{countdown:0,orderType:"TronDeposit",form:{paymentType:"",amount:""},orderInfo:{userId:null,paymentType:"",amount:"",passageType:"",receivingAddress:"",copeAmount:0,createDate:"",status:"",createTime:"",updateTime:"",orderId:0,orderNo:""}}},computed:{isTrading:function(){return!!this.orderInfo.orderId}},created:function(){this.getDepositDetail(this.isBuyVb)},methods:{getDepositDetail:function(){var t=arguments,e=this;return(0,a.Z)(regeneratorRuntime.mark((function n(){var r,o,a,i,u,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]&&t[0],n.next=3,(0,s.IA)({orderType:e.orderType});case 3:o=n.sent,a=o.ok,i=o.data,u=o.msg,a?i&&(e.$set(e,"orderInfo",i.order),e.form.amount=r?i.order.amount:i.order.copeAmount,e.form.paymentType=i.order.paymentType,e.cryptoAccountInfo.address=i.order.receivingAddress,e.cryptoAccountInfo.otcTicker=parseFloat(String(i.order.amount/i.order.copeAmount)).toFixed(2),e.updateQRcode(),i.currentStateExpireTime&&(i.currentStateExpireTime.expire?(e.countdown=1e3*i.currentStateExpireTime.expire-e.$root.getServerTime(),e.countdown>0&&(c=setTimeout((function(){return e.getDepositDetail(r)}),5e3),e.$once("hook:beforeDestroy",(function(){return clearTimeout(c)})))):e.countdown=0)):e.$toast(u);case 8:case"end":return n.stop()}}),n)})))()}}},f={computed:{isMerchant:function(){return"1"===this.$route.query.m||"merchant"===this.$route.params.type},hideAlipayWechat:function(){return this.isMerchant&&!this.$root.isMerchantAlipayWechatOpen},hideAlipayWechatAtMerchantPage:function(){return!this.$root.isMerchantAlipayWechatOpen},payments:function(){return this.isMerchant?this.$root.merchantPayments:this.$root.payments}}}}}]);
//# sourceMappingURL=3675.684f14ea.js.map