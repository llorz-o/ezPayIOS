"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[2440],{2440:function(t,e,r){r.r(e),r.d(e,{default:function(){return _}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page graybg page-orders"},[r("van-tabs",{attrs:{border:"","offset-top":"12.267vw",sticky:""},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},[t._l(t.tabs,(function(e,a){return r("van-tab",{key:a,attrs:{name:a,title:e.title,to:"/orders/"+a,replace:""},scopedSlots:t._u([{key:"title",fn:function(){return[r("van-dropdown-menu",[r("van-dropdown-item",{attrs:{options:t.filteredListTypeOptions,disabled:"filter"===t.tabActive},on:{change:t.onDropdownItemChange},model:{value:t.listType,callback:function(e){t.listType=e},expression:"listType"}})],1)]},proxy:!0}],null,!0)},[r("van-pull-refresh",{on:{refresh:t.onRefresh},model:{value:e.loading,callback:function(r){t.$set(e,"loading",r)},expression:"v.loading"}},[r("van-list",{ref:a,refInFor:!0,attrs:{"error-text":e.errorText,error:e.error,finished:e.finished,"finished-text":e.finishedText},on:{"update:error":function(r){return t.$set(e,"error",r)},load:t.chooseLoadList},model:{value:e.loading,callback:function(r){t.$set(e,"loading",r)},expression:"v.loading"}},[t._l(e.list,(function(e,a){return[t.isFilterDisabled?r("CryptoItem",{key:a,attrs:{"item-data":e}}):r("TransactionItem",{key:a,attrs:{dt:e}})]}))],2)],1)],1)})),r("van-tab",{attrs:{name:"filter",title:"筛选",disabled:t.isFilterDisabled},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(" 筛选 "),r("van-icon",{attrs:{name:"filter-o"}})]},proxy:!0}])},[r("div",{staticClass:"filters"},[r("van-checkbox-group",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(t.statusList,(function(e){return r("van-checkbox",{key:e.key,staticClass:"btn",attrs:{name:e.key,"label-disabled":""},scopedSlots:t._u([{key:"icon",fn:function(){return[r("div",{staticClass:"btn"},[t._v(" "+t._s(e.name)+" ")])]},proxy:!0}],null,!0)})})),1)],1),r("van-cell",{staticClass:"btns"},[r("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetFilters}},[t._v(" 重置 ")]),r("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:t.confirmFilters}},[t._v(" 确定 ")])],1)],1)],2)],1)},s=[],n=r(26982),i=r(39873),o=(r(83040),r(57327),r(41539),r(26699),r(38862),r(42558)),l=r(54025),u=r(12879),c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.itemData?r("div",{staticClass:"CryptoItem",on:{click:function(e){return t.$router.push("/crypto_order_detail/"+t.itemData.orderNo)}}},[r("div",{staticClass:"head"},[r("div",{staticClass:"time"},[t._v(t._s(t.itemData.createTime))]),r("div",{staticClass:"type"},[t._v(t._s(t.itemData.passageType))])]),r("div",{staticClass:"body card"},[r("div",{staticClass:"amount"},[r("div",{staticClass:"title"},[t._v("金额")]),r("div",{staticClass:"value"},[t._v(t._s(t._f("amountFormat")("区块链转商家"==t.itemData.passageType||"保证金转入"==t.itemData.passageType||"保证金转出"==t.itemData.passageType?t.itemData.copeAmount:t.itemData.amount)))])]),r("div",{staticClass:"status"},[r("div",{staticClass:"title"},[t._v("订单状态")]),r("div",{staticClass:"value"},[t._v(t._s(t.itemData.status))])]),r("div",{staticClass:"paymentType"},[r("div",{staticClass:"title"},[t._v("支付类型")]),r("div",{staticClass:"value"},[t._v(t._s(t.itemData.paymentType))])]),r("div",{staticClass:"orderNo"},[r("div",{staticClass:"title"},[t._v("订单号")]),r("div",{staticClass:"value"},[t._v(t._s(t.itemData.orderNo))])])])]):r("div",{staticClass:"nodata"},[t._v("no data "+t._s(t.$attr))])},d=[],p={props:{itemData:{type:Object,default:function(){return null}}}},f=p,m=r(1001),v=(0,m.Z)(f,c,d,!1,null,null,null),h=v.exports,T=r(27971),b={components:{TransactionItem:o.A,CryptoItem:h},data:function(){return T.Z.state},computed:{isFilterDisabled:function(){return"normal"!==this.tabsActiveForListType||"all"!==this.listType&&"buyer"!==this.listType&&"seller"!==this.listType},filteredListTypeOptions:function(){var t=this;return this.listTypeOptions.filter((function(e){return"normal"===t.tabsActiveForListType?"buyer"===e.value||"seller"===e.value||"all"===e.value:["TronDeposit","TronTransferBusiness","DepositTransferIn","DepositTransferOut","BusinessTransferVippayOut","all"].includes(e.value)}))}},watch:{"form.status":function(t){localStorage.setItem("ORDERS_FILTERS",JSON.stringify(t))},tabActive:function(t,e){"filter"!==e&&(this.oldTabActive=e)},tabsActiveForListType:function(t){"block"===t&&(this.tabActive="list"),this.listType="all",this.onDropdownItemChange()}},created:function(){this.getOrderStatus(),this.$root.updateUnReadCount(),this.$root.$emit("root:set-topbar",["customer-service"]),this.$root.$emit("root:set-layout",{bottom:!0});try{this.form.status=JSON.parse(localStorage.getItem("ORDERS_FILTERS"))||[]}catch(t){this.form.status=[],localStorage.removeItem("ORDERS_FILTERS")}},methods:{onDropdownItemChange:function(){this.onRefresh()},onRefresh:function(){this.tabs[this.oldTabActive]={loading:!0,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20},this.chooseLoadList()},chooseLoadList:function(t){this.isFilterDisabled?this.loadCryptoList():this.loadList()},loadCryptoList:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var r,a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Fw)({page:t.tabs[t.oldTabActive].page,pageSize:t.tabs[t.oldTabActive].pageSize,type:"normal"!==t.tabsActiveForListType&&"all"===t.listType?"":t.listType});case 2:r=e.sent,a=r.ok,s=r.data,i=r.msg,a?(t.tabs[t.oldTabActive].page*t.tabs[t.oldTabActive].pageSize>=s.total&&(t.tabs[t.oldTabActive].finished=!0),t.tabs[t.oldTabActive].loading=!1,(o=t.tabs[t.oldTabActive].list).push.apply(o,(0,n.Z)(s.list)),t.tabs[t.oldTabActive].page+=1):(t.tabs[t.oldTabActive].error=!0,t.tabs[t.oldTabActive].errorText=i);case 7:case"end":return e.stop()}}),e)})))()},loadList:function(){var t=this;(0,l.uF)(this.$tls.processParams({page:this.tabs[this.oldTabActive].page,pageSize:this.tabs[this.oldTabActive].pageSize,identity:"all"===this.listType?"":this.listType,status:this.form.status},["shake"]),"block"===this.tabsActiveForListType).then((function(e){var r=e.ok,a=e.msg,s=e.data;if(r){var i;if(t.tabs[t.oldTabActive].loading=!1,(i=t.tabs[t.oldTabActive].list).push.apply(i,(0,n.Z)(s.list)),t.tabs[t.oldTabActive].page*t.tabs[t.oldTabActive].pageSize>=s.total)return void(t.tabs[t.oldTabActive].finished=!0);t.tabs[t.oldTabActive].page+=1}else t.tabs[t.oldTabActive].error=!0,t.tabs[t.oldTabActive].errorText=a}))},confirmFilters:function(){this.onRefresh(),this.tabActive=this.oldTabActive},resetFilters:function(){this.form.status=[],localStorage.removeItem("ORDERS_FILTERS"),this.onRefresh(),this.tabActive=this.oldTabActive},getOrderStatus:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var r,a,s,n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=window.sessionStorage.getItem("ORDER_STATUS"),!r){e.next=11;break}return e.prev=2,a=JSON.parse(r),t.statusList=a,e.abrupt("return");case 8:e.prev=8,e.t0=e["catch"](2),console.error(e.t0);case 11:return e.next=13,(0,u.SX)();case 13:s=e.sent,n=s.ok,i=s.data,o=s.msg,n?(t.statusList=i,window.sessionStorage.setItem("ORDER_STATUS",JSON.stringify(i))):t.$toast(o);case 18:case"end":return e.stop()}}),e,null,[[2,8]])})))()}}},y=b,g=(0,m.Z)(y,a,s,!1,null,null,null),_=g.exports},54025:function(t,e,r){r.d(e,{$Z:function(){return s},$i:function(){return l},CI:function(){return v},Ej:function(){return T},Hn:function(){return c},N8:function(){return h},R9:function(){return _},XW:function(){return b},_H:function(){return n},_d:function(){return y},an:function(){return f},cf:function(){return p},dF:function(){return d},fW:function(){return u},l$:function(){return g},uF:function(){return i},v1:function(){return o},vi:function(){return m},y6:function(){return O}});var a=r(95426),s=function(t){return(0,a.q)({url:"/Api/Market/PendingOrder/myPendingOrderList",method:"POST",data:t})},n=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"PendingOrder/marketPendingOrderList"),method:"POST",data:t})},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,a.q)({url:e?"/Api/User/Business/getOrderList":"/Api/Market/Order/myOrderList",method:e?"POST":"GET",data:t})},o=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Sell/index"),method:"POST",data:t})},l=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Sell/recycle"),method:"POST",data:t})},u=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/myOrderDetail"),method:"GET",data:t})},c=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"PendingOrder/marketPendingOrderDetail"),method:"POST",data:t})},d=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/getCurrentOrderStatus"),method:"GET",data:t})},p=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"PendingOrder/myPendingOrderDetail"),method:"GET",data:t})},f=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/buyerCreatesOrder"),method:"POST",data:t})},m=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"PendingOrder/getOrderListByPendingOrder"),method:"GET",data:t})},v=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/sellerRefusesToCreateOrder"),method:"POST",data:t})},h=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/sellerConfirmsToCreateOrder"),method:"POST",data:t})},T=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/sellerHasNotReceivedPayment"),method:"POST",data:t})},b=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/sellerCompletesOrder"),method:"POST",data:t})},y=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/buyerCancelsOrder"),method:"POST",data:t})},g=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/buyerConfirmsOrderHasBeenPaid"),method:"POST",data:t})},_=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/buyerAppeals"),method:"POST",data:t})},O=function(t,e){return(0,a.q)({url:"/Api/Market/".concat((0,a.Dr)(e),"Order/getCancelsOrderDailyCount"),method:"GET",data:t})}},42558:function(t,e,r){r.d(e,{K:function(){return u},A:function(){return v}});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"hang-order",on:{click:function(e){return t.$router.push("/my_hang_order/"+t.dt.pendingOrderId+"?m="+("Business"===t.dt.sellerType?1:0))}}},[r("div",{staticClass:"time"},[t._v(" 挂单时间 "+t._s(t._f("dateFormat")(t.dt.createTime,"M/D h:m:s"))+" ")]),r("div",{staticClass:"content"},[r("span",{staticClass:"payment-method"},t._l(t.payments,(function(t,e){return r("div",{key:e,staticClass:"item",class:"pay"+t})})),0),r("span",{staticClass:"order-type"},[t._v(t._s(t.dt.isSplit?"可拆分":"不可拆分"))]),r("span",{staticClass:"amount"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.validAmount,{places:0}))+" V币 ")]),r("span",{staticClass:"order-status",class:t.stateClass},[t._v(" "+t._s(t.stateStr)+" ")]),r("van-icon",{attrs:{name:"arrow"}})],1)])},s=[],n=(r(83710),{name:"hangOrderItem",props:{dt:{type:Object,default:function(){return{createTime:(new Date).toLocaleDateString(),paymentType:7,isSplit:0,amount:"13076598",status:1,underwayOrder:1}}}},computed:{stateClass:function(){return this.dt.underwayOrder>0?"underway":1===this.dt.status?"hanging":0===this.dt.status?"closed":void 0},stateStr:function(){return 1==this.dt.frozen?"冻结":this.dt.underwayOrder>0?"已发起交易":1===this.dt.status?"挂单中...":0===this.dt.status?this.dt.amount==this.dt.soldAmount?"已售罄":"取消挂单":void 0},payments:function(){return this.$root.parsePayments(this.dt.paymentType)}},methods:{}}),i=n,o=r(1001),l=(0,o.Z)(i,a,s,!1,null,"e930966c",null),u=l.exports,c=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"transaction",on:{click:function(e){return t.$router.push("/"+(t.isSale?"transaction_sale":"transaction_buy")+"/"+t.dt.orderId+"?m="+("Business"===t.dt.sellerType?1:0))}}},[r("span",{staticClass:"inout bg",class:t.isSale?"out":"in"},[t._v(" "+t._s(t.isSale?"卖":"买")+" ")]),r("span",{staticClass:"time"},[t._v(" "+t._s(t.ymd)+" "),r("br"),t._v(" "+t._s(t.hms)+" ")]),r("span",{staticClass:"amountEl"},[r("span",{staticClass:"amount",class:t.isSale?"out":"in"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.amount))+" ")]),r("span",{staticClass:"unit"},[t._v(" V币 ")])]),r("span",{staticClass:"order-status",class:t._f("transactingOrderStatus")(t.dt.status)},[t._v(" "+t._s(t._f("transactingOrderStatus")(t.dt.status,"seller-content"))+" ")])])},d=[],p=(r(47042),{name:"TransactionItem",props:{dt:{type:Object,default:function(){return{orderType:1,time:(new Date).toLocaleDateString(),amount:"0",orderStatus:"WaitingSellerConfirm"}}}},computed:{orderTime:function(){return this.$options.filters.dateFormat(this.dt.createTime,"Y/M/D h:m:s")},ymd:function(){return this.orderTime.slice(0,10)},hms:function(){return this.orderTime.slice(11)},isSale:function(){return!!this.$root.userInfo&&(this.dt.sellerId==this.$root.userInfo.userId&&("Member"===this.dt.sellerType||"Business"===this.dt.sellerType))}}}),f=p,m=(0,o.Z)(f,c,d,!1,null,"2c263b2e",null),v=m.exports},27971:function(t,e,r){var a=r(39155),s=r(25748),n=function(){return a.Z.observable({listType:"all",listTypeOptions:[{text:"区块链购币",value:"TronDeposit"},{text:"区块链转商家",value:"TronTransferBusiness"},{text:"保证金转入",value:"DepositTransferIn"},{text:"保证金转出",value:"DepositTransferOut"},{text:"商家转出钱包",value:"BusinessTransferVippayOut"},{text:"买单",value:"buyer"},{text:"卖单",value:"seller"},{text:"全部",value:"all"}],statusList:[],tabActive:"list",tabs:{list:{title:"全部",loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",finishedText:"暂无更多数据",list:[],page:1,pageSize:20}},form:{status:[]},oldTabActive:"list",tabsActiveForListType:"normal"})},i=n(),o={state:i};s.J.$on("root:exit-login",(function(){return o.state=n()})),e["Z"]=o}}]);
//# sourceMappingURL=2440.5f602d87.js.map