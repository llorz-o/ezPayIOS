{"version":3,"file":"js/8134.6100d9ec.js","mappings":"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","sources":["webpack://ez_pay/./src/views/user_certify/index.vue?a9dc","webpack://ez_pay/./src/vendor/validator.js","webpack://ez_pay/src/views/user_certify/index.vue","webpack://ez_pay/./src/views/user_certify/index.vue?f062","webpack://ez_pay/./src/views/user_certify/index.vue","webpack://ez_pay/./src/apis/verify.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page page-user-certify\"},[_c('van-steps',{attrs:{\"active\":_vm.stepActive}},[_c('van-step',[_vm._v(\"上传身份证\")]),_c('van-step',[_vm._v(\"身份识别\")]),_c('van-step',[_vm._v(\" 人工审核 \"),(_vm.stepActive === 2)?_c('div',{staticClass:\"bottom-status\",class:_vm.isVerifying ? 'processing' : 'failed'},[_vm._v(\" (\"+_vm._s(_vm.isVerifying ? \"审核中...\" : (\"审核失败:\" + (_vm.$root.userInfo.realNameRemark)))+\") \")]):_vm._e()])],1),_c('van-form',[(_vm.stepActive === 0 || _vm.stepActive === 2)?[_c('van-field',{attrs:{\"disabled\":_vm.stepActive === 2,\"autocomplete\":\"new-password\",\"label\":\"姓名\",\"placeholder\":\"请输入你的名字\"},model:{value:(_vm.form.realName),callback:function ($$v) {_vm.$set(_vm.form, \"realName\", $$v)},expression:\"form.realName\"}}),_c('van-field',{attrs:{\"disabled\":_vm.stepActive === 2,\"autocomplete\":\"new-password\",\"label\":\"身份证号\",\"placeholder\":\"请输入身份证号码\"},model:{value:(_vm.form.idCard),callback:function ($$v) {_vm.$set(_vm.form, \"idCard\", $$v)},expression:\"form.idCard\"}}),_c('div',{staticClass:\"gray-8\"}),_c('van-cell-group',{attrs:{\"border\":false,\"title\":\"请上传身份证\"}},[_c('div',{staticClass:\"upload\"},[_c('div',{staticClass:\"img\"},[_c('van-image',{attrs:{\"src\":_vm.$root.getImageUrl(_vm.form.idCardFrontImg),\"fit\":\"contain\"},scopedSlots:_vm._u([{key:\"error\",fn:function(){return [_c('div',{staticClass:\"id\"})]},proxy:true}],null,false,1031679392)}),_c('div',{staticClass:\"label\"},[_vm._v(\"身份证正面\")])],1),(_vm.stepActive === 0)?_c('van-uploader',{attrs:{\"after-read\":_vm.readImage,\"preview-image\":false,\"max-count\":\"1\",\"name\":\"id\",\"result-type\":\"file\"},nativeOn:{\"click\":function($event){return (function (e) { return _vm.uploadID(e, { name: 'id' }); }).apply(null, arguments)}}},[_c('div',{staticClass:\"camera\"})]):_vm._e()],1),_c('div',{staticClass:\"upload\"},[_c('div',{staticClass:\"img\"},[_c('van-image',{attrs:{\"src\":_vm.$root.getImageUrl(_vm.form.idCardReverseImg),\"fit\":\"contain\"},scopedSlots:_vm._u([{key:\"error\",fn:function(){return [_c('div',{staticClass:\"id-back\"})]},proxy:true}],null,false,3155635750)}),_c('div',{staticClass:\"label\"},[_vm._v(\"身份证反面\")])],1),(_vm.stepActive === 0)?_c('van-uploader',{attrs:{\"after-read\":_vm.readImage,\"preview-image\":false,\"max-count\":\"1\",\"name\":\"idBack\",\"result-type\":\"file\"},nativeOn:{\"click\":function($event){return (function (e) { return _vm.uploadID(e, { name: 'idBack' }); }).apply(null, arguments)}}},[_c('div',{staticClass:\"camera\"})]):_vm._e()],1)]),(!_vm.isVerifying && _vm.stepActive === 2)?_c('van-button',{staticClass:\"primary block\",on:{\"click\":_vm.onReCertify}},[_vm._v(\" 请重新认证 \")]):_c('van-button',{staticClass:\"primary block\",on:{\"click\":_vm.onNext}},[_vm._v(\" 下一步\")])]:_vm._e(),(_vm.stepActive === 1)?[_c('div',{staticClass:\"step2\"},[_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"font-size\":\"13px\",\"align-items\":\"center\"}},[_c('van-count-down',{ref:\"countdown\",staticStyle:{\"color\":\"red\"},attrs:{\"time\":_vm.time,\"format\":\"mm:ss\"},on:{\"finish\":_vm.finish}}),_vm._v(\"  秒后刷新 \")],1),_c('div',{staticClass:\"numbers\"},_vm._l((_vm.form.code),function(item,index){return _c('span',{key:index,staticClass:\"number\"},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0),_c('div',{staticClass:\"tip\"},[_vm._v(\" 请录制一段本人视频， \"),_c('span',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" 证件放在下颚，念出数字\"+_vm._s((_vm.form.code || []).join(\"\"))+\"， \")]),_vm._v(\" 视频长度最长10秒，且大小不超过40M \")]),_c('van-uploader',{attrs:{\"after-read\":_vm.readVideo,\"max-size\":40 * 1024 * 1024,\"preview-full-image\":false,\"preview-image\":false,\"accept\":\"video/*\"},on:{\"oversize\":function($event){return _vm.$toast('视频不得超过40M')}}},[_c('van-button',{staticClass:\"primary block\",attrs:{\"loading\":_vm.showUploadProgress,\"icon\":\"plus\"}},[_vm._v(\" 点击上传视频 \")])],1),_c('van-popup',{staticClass:\"progressPopup\",attrs:{\"close-on-click-overlay\":false},model:{value:(_vm.showUploadProgress),callback:function ($$v) {_vm.showUploadProgress=$$v},expression:\"showUploadProgress\"}},[_c('van-circle',{attrs:{\"rate\":0,\"speed\":100,\"text\":(\"上传进度:\" + (_vm.currentRate.toFixed(0)) + \"%\")},model:{value:(_vm.currentRate),callback:function ($$v) {_vm.currentRate=$$v},expression:\"currentRate\"}})],1)],1)]:_vm._e()],2),_c('van-dialog',{staticClass:\"uploadAlert\",attrs:{\"show-confirm-button\":false,\"close-on-click-overlay\":\"\"},on:{\"close\":_vm.onDialogClose},scopedSlots:_vm._u([{key:\"title\",fn:function(){return [_c('van-icon',{attrs:{\"name\":\"success\"}}),_c('div',[_vm._v(\"上传成功\")])]},proxy:true}]),model:{value:(_vm.showSuccessTip),callback:function ($$v) {_vm.showSuccessTip=$$v},expression:\"showSuccessTip\"}},[_c('div',[_vm._v(\"人工审核需要3-10分钟\")]),_c('div',[_vm._v(\" 审核结果在 \"),_c('span',[_vm._v(\"「用户中心-实名认证」\")]),_vm._v(\" 中查看 \")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","function checkId1(code) {\n  /**\n   * 根据〖中华人民共和国国家标准 GB 11643-1999〗中有关公民身份号码的规定，公民身份号码是特征组合码，由十七位数字本体码和一位数字校验码组成。排列顺序从左至右依次为：六位数字地址码，八位数字出生日期码，三位数字顺序码和一位数字校验码。\n   * 地址码表示编码对象常住户口所在县(市、旗、区)的行政区划代码。\n   * 出生日期码表示编码对象出生的年、月、日，其中年份用四位数字表示，年、月、日之间不用分隔符。\n   * 顺序码表示同一地址码所标识的区域范围内，对同年、月、日出生的人员编定的顺序号。顺序码的奇数分给男性，偶数分给女性。\n   * 校验码是根据前面十七位数字码，按照ISO 7064:1983.MOD 11-2校验码计算出来的检验码。\n   * 出生日期计算方法。\n   * 15位的身份证编码首先把出生年扩展为4位，简单的就是增加一个19或18,这样就包含了所有1800-1999年出生的人;\n   * 2000年后出生的肯定都是18位的了没有这个烦恼，至于1800年前出生的,那啥那时应该还没身份证号这个东东，⊙﹏⊙b汗...\n   * 下面是正则表达式:\n   * 出生日期1800-2099  (18|19|20)?\\d{2}(0[1-9]|1[12])(0[1-9]|[12]\\d|3[01])\n   * 身份证正则表达式 /^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[12])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|X)$/i\n   * 15位校验规则 6位地址编码+6位出生日期+3位顺序号\n   * 18位校验规则 6位地址编码+8位出生日期+3位顺序号+1位校验位\n   * 校验位规则     公式:∑(ai×Wi)(mod 11)……………………………………(1)\n   * 公式(1)中：\n   * i----表示号码字符从由至左包括校验码在内的位置序号；\n   * ai----表示第i位置上的号码字符值；\n   * Wi----示第i位置上的加权因子，其数值依据公式Wi=2^(n-1）(mod 11)计算得出。\n   * i 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1\n   * Wi 7 9 10 5 8 4 2 1 6 3 7 9 10 5 8 4 2 1\n   * ============================================================================================\n   * 身份证号合法性验证\n   * 支持15位和18位身份证号\n   * 支持地址编码、出生日期、校验位验证\n   * @param code\n   * @returns {*[]} 该函数返回一个数组 [true,''] 或 [false,\"身份证号格式错误\"]\n   * @constructor\n   */\n  function IdentityCodeValid(code) {\n    var city = {\n      11: \"北京\",\n      12: \"天津\",\n      13: \"河北\",\n      14: \"山西\",\n      15: \"内蒙古\",\n      21: \"辽宁\",\n      22: \"吉林\",\n      23: \"黑龙江 \",\n      31: \"上海\",\n      32: \"江苏\",\n      33: \"浙江\",\n      34: \"安徽\",\n      35: \"福建\",\n      36: \"江西\",\n      37: \"山东\",\n      41: \"河南\",\n      42: \"湖北 \",\n      43: \"湖南\",\n      44: \"广东\",\n      45: \"广西\",\n      46: \"海南\",\n      50: \"重庆\",\n      51: \"四川\",\n      52: \"贵州\",\n      53: \"云南\",\n      54: \"西藏 \",\n      61: \"陕西\",\n      62: \"甘肃\",\n      63: \"青海\",\n      64: \"宁夏\",\n      65: \"新疆\",\n      71: \"台湾\",\n      81: \"香港\",\n      82: \"澳门\",\n      91: \"国外 \"\n    };\n    var tip = \"\";\n    var pass = true;\n\n    if (!code || !/^\\d{6}(18|19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|[xX])$/i.test(code)) {\n      tip = \"身份证号格式错误\";\n      pass = false;\n    } else if (!city[code.substr(0, 2)]) {\n      tip = \"地址编码错误\";\n      pass = false;\n    } else {\n      //18位身份证需要验证最后一位校验位\n      if (code.length == 18) {\n        code = code.split('');\n        //∑(ai×Wi)(mod 11)\n        //加权因子\n        var factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\n        //校验位\n        var parity = [1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2];\n        var sum = 0;\n        var ai = 0;\n        var wi = 0;\n        for (var i = 0; i < 17; i++) {\n          ai = code[i];\n          wi = factor[i];\n          sum += ai * wi;\n        }\n        var last = parity[sum % 11];\n        if (parity[sum % 11] != code[17]) {\n          tip = \"校验位错误,结尾是字母请注意大小写\";\n          pass = false;\n        }\n      }\n    }\n    // if(!pass) alert(tip);\n    //return pass;\n    return [pass, tip]\n  }\n\n  return IdentityCodeValid(code)[0]\n}\n\nfunction checkId2(code) {\n  /**\n   * 验证身份证号码\n   * @param { String } code 身份证号码\n   */\n  function identityIDCard(code) {\n    // 身份证号前两位代表区域\n    const city = {\n      11: '北京',\n      12: '天津',\n      13: '河北',\n      14: '山西',\n      15: '内蒙古',\n      21: '辽宁',\n      22: '吉林',\n      23: '黑龙江 ',\n      31: '上海',\n      32: '江苏',\n      33: '浙江',\n      34: '安徽',\n      35: '福建',\n      36: '江西',\n      37: '山东',\n      41: '河南',\n      42: '湖北 ',\n      43: '湖南',\n      44: '广东',\n      45: '广西',\n      46: '海南',\n      50: '重庆',\n      51: '四川',\n      52: '贵州',\n      53: '云南',\n      54: '西藏 ',\n      61: '陕西',\n      62: '甘肃',\n      63: '青海',\n      64: '宁夏',\n      65: '新疆',\n      71: '台湾',\n      81: '香港',\n      82: '澳门',\n      91: '国外 ',\n    };\n    const idCardReg = /^[1-9]\\d{5}(19|20)?\\d{2}(0[1-9]|1[012])(0[1-9]|[12]\\d|3[01])\\d{3}(\\d|X)$/i; // 身份证格式正则表达式\n    let errorMessage = ''; // 错误提示信息\n    let isPass = true; // 身份证验证是否通过（true通过、false未通过）\n\n    // 如果身份证不满足格式正则表达式\n    if (!code) {\n      errorMessage = '请输入身份证号码';\n      isPass = false;\n    } else if (!code.match(idCardReg)) {\n      errorMessage = '请输入正确的身份证号码';\n      isPass = false;\n    } else if (!city[code.substr(0, 2)]) {\n      // 区域数组中不包含需验证的身份证前两位\n      errorMessage = '请输入正确的身份证号码';\n      isPass = false;\n    } else if (code.length === 18) {\n      // 18位身份证需要验证最后一位校验位\n      code = code.split('');\n      // ∑(ai×Wi)(mod 11)\n      // 加权因子\n      const factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\n      // 校验位\n      const parity = [1, 0, 'X', 9, 8, 7, 6, 5, 4, 3, 2];\n      let sum = 0;\n      let ai = 0;\n      let wi = 0;\n      for (let i = 0; i < 17; i++) {\n        ai = parseInt(code[i]);\n        wi = factor[i];\n        sum += ai * wi; // 开始计算并相加\n      }\n      const last = parity[sum % 11]; // 求余\n      if (last.toString() !== code[17]) {\n        errorMessage = '请输入正确的身份证号码';\n        isPass = false;\n      }\n    }\n    return {\n      errorMessage,\n      isPass,\n    }\n  }\n\n  return identityIDCard(code).isPass\n}\n\nexport function checkIDCard(idcode) {\n  // 加权因子\n  var weight_factor = [7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2];\n  // 校验码\n  var check_code = ['1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'];\n\n  var code = idcode + \"\";\n  var last = idcode[17]; //最后一位\n\n  var seventeen = code.substring(0, 17);\n\n  // ISO 7064:1983.MOD 11-2\n  // 判断最后一位校验码是否正确\n  var arr = seventeen.split(\"\");\n  var len = arr.length;\n  var num = 0;\n  for (var i = 0; i < len; i++) {\n    num = num + arr[i] * weight_factor[i];\n  }\n\n  // 获取余数\n  var resisue = num % 11;\n  var last_no = check_code[resisue];\n\n  // 格式的正则\n  // 正则思路\n  /*\n  第一位不可能是0\n  第二位到第六位可以是0-9\n  第七位到第十位是年份，所以七八位为19或者20\n  十一位和十二位是月份，这两位是01-12之间的数值\n  十三位和十四位是日期，是从01-31之间的数值\n  十五，十六，十七都是数字0-9\n  十八位可能是数字0-9，也可能是X\n  */\n  var idcard_patter = /^[1-9][0-9]{5}([1][9][0-9]{2}|[2][0][0|1][0-9])([0][1-9]|[1][0|1|2])([0][1-9]|[1|2][0-9]|[3][0|1])[0-9]{3}([0-9]|[X])$/;\n\n  // 判断格式是否正确\n  var format = idcard_patter.test(idcode);\n  // console.log(last, last_no, format);\n  // 返回验证结果，校验码和格式同时正确才算是合法的身份证号码\n  return (last === last_no && format ? true : false) || checkId1(idcode) || checkId2(idcode)\n}\n","<template>\n  <div class=\"page page-user-certify\">\n    <van-steps :active=\"stepActive\">\n      <van-step>上传身份证</van-step>\n      <van-step>身份识别</van-step>\n      <van-step>\n        人工审核\n        <div\n          v-if=\"stepActive === 2\"\n          :class=\"isVerifying ? 'processing' : 'failed'\"\n          class=\"bottom-status\"\n        >\n          ({{ isVerifying ? \"审核中...\" : `审核失败:${$root.userInfo.realNameRemark}` }})\n        </div>\n      </van-step>\n    </van-steps>\n\n    <van-form>\n      <template v-if=\"stepActive === 0 || stepActive === 2\">\n        <van-field\n          v-model=\"form.realName\"\n          :disabled=\"stepActive === 2\"\n          autocomplete=\"new-password\"\n          label=\"姓名\"\n          placeholder=\"请输入你的名字\"\n        ></van-field>\n        <van-field\n          v-model=\"form.idCard\"\n          :disabled=\"stepActive === 2\"\n          autocomplete=\"new-password\"\n          label=\"身份证号\"\n          placeholder=\"请输入身份证号码\"\n        ></van-field>\n        <div class=\"gray-8\"></div>\n        <van-cell-group :border=\"false\" title=\"请上传身份证\">\n          <div class=\"upload\">\n            <div class=\"img\">\n              <van-image :src=\"$root.getImageUrl(form.idCardFrontImg)\" fit=\"contain\">\n                <template v-slot:error>\n                  <div class=\"id\"></div>\n                </template>\n              </van-image>\n              <div class=\"label\">身份证正面</div>\n            </div>\n            <van-uploader\n              v-if=\"stepActive === 0\"\n              :after-read=\"readImage\"\n              :preview-image=\"false\"\n              max-count=\"1\"\n              name=\"id\"\n              result-type=\"file\"\n              @click.native=\"(e) => uploadID(e, { name: 'id' })\"\n            >\n              <div class=\"camera\"></div>\n            </van-uploader>\n          </div>\n          <div class=\"upload\">\n            <div class=\"img\">\n              <van-image :src=\"$root.getImageUrl(form.idCardReverseImg)\" fit=\"contain\">\n                <template v-slot:error>\n                  <div class=\"id-back\"></div>\n                </template>\n              </van-image>\n              <div class=\"label\">身份证反面</div>\n            </div>\n            <van-uploader\n              v-if=\"stepActive === 0\"\n              :after-read=\"readImage\"\n              :preview-image=\"false\"\n              max-count=\"1\"\n              name=\"idBack\"\n              result-type=\"file\"\n              @click.native=\"(e) => uploadID(e, { name: 'idBack' })\"\n            >\n              <div class=\"camera\"></div>\n            </van-uploader>\n          </div>\n        </van-cell-group>\n        <van-button\n          v-if=\"!isVerifying && stepActive === 2\"\n          class=\"primary block\"\n          @click=\"onReCertify\"\n        >\n          请重新认证\n        </van-button>\n        <van-button v-else class=\"primary block\" @click=\"onNext\"> 下一步</van-button>\n      </template>\n      <template v-if=\"stepActive === 1\">\n        <div class=\"step2\">\n          <div style=\"display: flex;justify-content: center;font-size: 13px;align-items: center;\">\n            <van-count-down\n              ref=\"countdown\"\n              style=\"color: red;\"\n              :time=\"time\"\n              format=\"mm:ss\"\n              @finish=\"finish\"\n            />\n            &nbsp;秒后刷新\n          </div>\n          <div class=\"numbers\">\n            <span v-for=\"(item, index) in form.code\" :key=\"index\" class=\"number\">\n              {{ item }}\n            </span>\n          </div>\n          <div class=\"tip\">\n            请录制一段本人视频，\n            <span style=\"color: red\">\n              证件放在下颚，念出数字{{ (form.code || []).join(\"\") }}，\n            </span>\n            视频长度最长10秒，且大小不超过40M\n          </div>\n          <van-uploader\n            :after-read=\"readVideo\"\n            :max-size=\"40 * 1024 * 1024\"\n            :preview-full-image=\"false\"\n            :preview-image=\"false\"\n            accept=\"video/*\"\n            @oversize=\"$toast('视频不得超过40M')\"\n          >\n            <van-button :loading=\"showUploadProgress\" class=\"primary block\" icon=\"plus\">\n              点击上传视频\n            </van-button>\n          </van-uploader>\n\n          <van-popup\n            v-model=\"showUploadProgress\"\n            :close-on-click-overlay=\"false\"\n            class=\"progressPopup\"\n          >\n            <van-circle\n              v-model=\"currentRate\"\n              :rate=\"0\"\n              :speed=\"100\"\n              :text=\"`上传进度:${currentRate.toFixed(0)}%`\"\n            />\n          </van-popup>\n        </div>\n      </template>\n    </van-form>\n\n    <van-dialog\n      v-model=\"showSuccessTip\"\n      :show-confirm-button=\"false\"\n      class=\"uploadAlert\"\n      close-on-click-overlay\n      @close=\"onDialogClose\"\n    >\n      <template #title>\n        <van-icon name=\"success\"/>\n        <div>上传成功</div>\n      </template>\n      <div>人工审核需要3-10分钟</div>\n      <div>\n        审核结果在\n        <span>「用户中心-实名认证」</span>\n        中查看\n      </div>\n    </van-dialog>\n  </div>\n</template>\n\n<script>\nimport MD5 from \"crypto-js/md5\";\nimport {upload} from \"@/apis/common\";\nimport {addRealNameAuth} from \"@/apis/user\";\nimport {uploadLargeVideo, /* uploadVideo */} from \"@/apis/verify\";\nimport {Toast} from \"vant\";\n// import {wcsUpload} from \"wcs-js-sdk\";\nimport {dateFormat} from \"@/vendor/tools\";\nimport {checkIDCard} from \"@/vendor/validator\";\nimport { blobToDataURI } from '@/vendor/file'\n\nexport default {\n  data() {\n    return {\n      stepActive: 0,\n      isVerifying: false,\n      showSuccessTip: false,\n      form: {\n        realName: \"\",\n        idCard: \"\",\n        idCardFrontImg: \"\",\n        idCardReverseImg: \"\",\n        faceImg: \"\",\n        code: [],\n      },\n      idCardImg: [],\n      idCardBackImg: [],\n      isFaceCollecting: false,\n      featureCount: 0,\n      uploadInfo: {\n        imageUrl: \"\",\n        token: \"\",\n        uploadUrl: \"\",\n      },\n      showUploadProgress: false,\n      currentRate: 0,\n      time: 0,\n    };\n  },\n  created() {\n    if (this.$root.isH5Plus) {\n      // 获取权限\n      window.plus.camera.getCamera();\n    }\n\n    const loading = Toast.loading(\"查询审核状态中...\");\n\n    this.$root.$emit(\"root:close-identify-dialog\");\n    this.$root.$emit(\"root:set-topbar\", [\"left-back\"]);\n    // 获取wcs上传信息\n    // this.fetchWcsUploadBaseInfo();\n    // return (this.stepActive = 1);\n    this.$root.fetchUserInfo().then((ok) => {\n      loading.close();\n      if (ok) {\n        const auditRealNameStatus = this.$root.userInfo.auditRealNameStatus;\n        if (auditRealNameStatus === \"\") {\n          this.stepActive = 0;\n        }\n        if (auditRealNameStatus === 0) {\n          this.stepActive = 2;\n          this.isVerifying = true;\n          this.$dialog.alert({\n            className: \"common alert\",\n            message: \"实名认证资料正在人工审核中，请耐心等待\",\n            beforeClose: (_, done) => {\n              this.$router.back();\n              done();\n            },\n          });\n        }\n        if (auditRealNameStatus === 2) {\n          this.stepActive = 2;\n        }\n      } else {\n        this.$dialog.alert({\n          className: \"common\",\n          message: \"查询审核状态失败，请稍后再试\",\n          beforeClose: (action, done) => {\n            this.$router.back();\n            done();\n          },\n        });\n      }\n    });\n  },\n  methods: {\n    readVideo(file) {\n      const time = dateFormat(new Date(), \"YMDhms\");\n      const filename =\n        MD5(time + file.file.name) + `.${file.file.name.split(\".\").pop() || \"unknown\"}`;\n      this.uploadLargeVideo(file, filename);\n      // if (this.$root.isH5Plus) {\n\n      // } else {\n      //   this.uploadFileByWcs(file.file);\n      // }\n    },\n    uploadLargeVideo(file, file_name) {\n      const [_, content] = (file.content || \"\").split(\",\");\n      // const mime = info.split(\";\")[0].split(\":\")[1];\n      const chunks = [];\n      const chunk_size = 2 * 1000 * 1024;\n      let chunk_len = 100 / chunks.length;\n      let index = 0;\n\n      for (; index * chunk_size < content.length;) {\n        index++;\n        chunks.push(content.slice((index - 1) * chunk_size, index * chunk_size));\n      }\n      chunk_len = 100 / chunks.length;\n\n      let uploadIndex = 0;\n      let fileName = file_name;\n\n      const upload = () => {\n        if (uploadIndex >= chunks.length) return;\n        uploadLargeVideo(\n          {\n            videoBase64: chunks[uploadIndex],\n            blockOrder: uploadIndex + 1,\n            blockNum: chunks.length,\n            fileName,\n          },\n          {\n            onUploadProgress: (event) => {\n              this.currentRate =\n                chunk_len * uploadIndex + (event.loaded / event.total) * chunk_len;\n            },\n          }\n        ).then(({ok, data}) => {\n          if (ok) {\n            this.currentRate = ((uploadIndex + 1) / chunks.length) * 100;\n            if (data.feof) {\n              // 上传完毕\n              this.form.faceImg = data.fileName;\n              this.submit();\n              this.$toast.success(\"上传成功\");\n              this.finishUpload();\n            } else {\n              fileName = data.nextFileName;\n              uploadIndex++;\n              upload();\n            }\n          } else {\n            // 上传失败\n            this.finishUpload();\n            this.$toast.fail(\"上传失败\");\n          }\n        });\n      };\n      this.showUploadProgress = true;\n      upload();\n    },\n    // uploadFileByWcs(file) {\n    //   const that = this;\n    //   const handler = wcsUpload(file, this.uploadInfo.token, this.uploadInfo.uploadUrl, {\n    //     retryCount: 3,\n    //   });\n\n    //   this.showUploadProgress = true;\n    //   handler.uploadProgress = function (progress) {\n    //     that.currentRate = progress.total.percent;\n    //   };\n    //   handler.onError = function (error) {\n    //     that.showUploadProgress = false;\n    //     if (!that.isRequestError) {\n    //       that.$toast.fail(error.message);\n    //     }\n    //   };\n    //   handler.onComplete = function () {\n    //     that.showUploadProgress = false;\n    //     that.submit();\n    //     that.$toast.success(\"上传成功\");\n    //   };\n    //   handler.putFile();\n    // },\n    // fetchWcsUploadBaseInfo() {\n    //   /* uploadVideo */().then(({ok, msg, data}) => {\n    //     if (ok) {\n    //       this.uploadInfo = data;\n    //     } else {\n    //       this.$toast.fail(msg);\n    //     }\n    //   });\n    // },\n    finishUpload() {\n      this.showUploadProgress = false;\n      this.currentRate = 0;\n    },\n    uploadID(e, info) {\n      if (this.$root.isH5Plus) {\n        e.preventDefault();\n        window.h5p.uploadImage(async (blob, name, type, path) => {\n          if (blob) {\n            var fs = new File([blob], name, {\n              type: type,\n            });\n            this.readImage({ file: fs, _filePath: path}, info);\n          } else {\n            this.$toast.fail(\"获取图片失败\");\n          }\n        });\n      }\n    },\n    readImage(file, info) {\n      file.status = \"uploading\";\n      file.message = \"上传中...\";\n      upload({\n        _file: file.file,\n        imgFile: this.$root.isH5Plus ? file._filePath : file.file,  \n        type: \"authImg\"\n      }).then(({ok, data, msg}) => {\n        if (ok) {\n          file.status = \"done\";\n          file.url = data.name;\n          if (info.name === \"id\") {\n            this.form.idCardFrontImg = data.name;\n          }\n          if (info.name === \"idBack\") {\n            this.form.idCardReverseImg = data.name;\n          }\n        } else {\n          file.status = \"error\";\n          file.message = \"上传失败\";\n          this.$toast.fail(msg);\n        }\n      });\n    },\n    onNext() {\n      if (!this.form.realName) return this.$toast.fail(\"请输入真实用户名\");\n      if (!checkIDCard(String(this.form.idCard.replace(\" \", \"\"))))\n        return this.$toast.fail(\"请输入合法身份证号码\");\n      if (!this.form.idCardFrontImg) return this.$toast.fail(\"请上传身份证正面照片\");\n      if (!this.form.idCardReverseImg) return this.$toast.fail(\"请上传身份证反面照片\");\n      this.stepActive += 1;\n      this.countdownCode()\n    },\n    onReCertify() {\n      this.stepActive = 0;\n    },\n    onDialogClose() {\n      this.$router.back();\n    },\n    submit() {\n      addRealNameAuth({\n        ...this.form,\n        code: this.form.code.join(\"\"),\n      }).then(({ok, msg}) => {\n        if (ok) {\n          this.$root.userInfo.auditRealNameStatus = 0;\n          this.showSuccessTip = true;\n        } else {\n          this.$toast.fail(msg);\n        }\n      });\n    },\n    countdownCode() {\n      this.time = 1000 * 60 * 5\n      this.form.code = [0, 0, 0, 0].map(() => Math.floor(Math.random() * 10));\n    },\n    finish() {\n      this.form.code = [0, 0, 0, 0].map(() => Math.floor(Math.random() * 10));\n      this.$refs.countdown.reset()\n    }\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.page-user-certify {\n  overflow-y: auto;\n\n  .van-steps {\n    &__items {\n      margin-bottom: 30px;\n\n      .van-step--horizontal:last-child {\n        .bottom-status {\n          left: initial;\n          right: 0;\n          transform: none;\n        }\n      }\n    }\n\n    .bottom-status {\n      position: absolute;\n      top: 44px;\n      white-space: nowrap;\n\n      &.processing {\n        color: #15b300;\n      }\n\n      &.failed {\n        color: #fb2222;\n      }\n    }\n  }\n\n  .van-cell-group__title {\n    color: #333;\n    padding-left: 12px;\n    padding-right: 12px;\n  }\n\n  .upload {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 30px 0;\n\n    .img {\n      .label {\n        font-size: 12px;\n        text-align: center;\n        padding-top: 10px;\n      }\n    }\n\n    .van-image {\n      width: 194px;\n      height: 108px;\n      margin-right: 15px;\n\n      .id {\n        width: 194px;\n        height: 108px;\n        background-image: url(\"@/assets/images/id@3x.png\");\n        background-size: 100% 100%;\n      }\n\n      .id-back {\n        width: 194px;\n        height: 108px;\n        background-image: url(\"@/assets/images/id-back@3x.png\");\n        background-size: 100% 100%;\n      }\n    }\n\n    .camera {\n      width: 40px;\n      height: 40px;\n      background-image: url(\"@/assets/images/camera@3x.png\");\n      background-size: 100% 100%;\n    }\n  }\n\n  .step2 {\n    text-align: center;\n\n    .numbers {\n      font-size: 30px;\n      font-weight: 800;\n    }\n\n    .tip {\n      font-size: 12px;\n      color: #999999;\n      padding: 12px 30px 0;\n    }\n\n    .wrap {\n      position: relative;\n      box-sizing: border-box;\n      padding-top: 19px;\n      width: 196px;\n      height: 164px;\n      background-image: url(\"@/assets/images/wrap@3x.png\");\n      background-size: 100% 100%;\n      margin: 45px auto;\n\n      canvas,\n      #video {\n        width: 196px;\n        height: 164px;\n        top: 0;\n        left: 0;\n        z-index: 2;\n        position: absolute;\n      }\n\n      #video {\n        z-index: 1;\n        transform: scale(-1, 1);\n      }\n\n      .van-circle {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        transform: translate3d(-50%, -50%, 0);\n      }\n\n      .face {\n        width: 117.5px;\n        height: 125.5px;\n        background-image: url(\"@/assets/images/face@3x.png\");\n        background-size: 100% 100%;\n        margin: 0 auto;\n      }\n    }\n  }\n\n  .van-button.primary {\n    margin-bottom: 40px;\n  }\n\n  .uploadAlert {\n    .van-dialog__header {\n      color: #6f5bfeff;\n      font-size: 15px;\n\n      .van-icon-success {\n        font-size: 30px;\n        width: 32px;\n        height: 32px;\n        line-height: 32px;\n        background-color: $theme;\n        border-radius: 50%;\n        color: #fff;\n      }\n    }\n\n    .van-dialog__content {\n      text-align: center;\n      font-size: 12px;\n      color: #333333ff;\n      line-height: 1.8;\n      padding-bottom: 20px;\n\n      span {\n        color: #fb2222ff;\n      }\n    }\n  }\n\n  .progressPopup {\n    padding: 10px;\n    border-radius: 15px;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0c53a2b4&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {q} from '@/vendor/q';\n// import * as wangsu from 'wcs-js-sdk'\n// import CryptoJS from 'crypto-js'\n\nexport const getImageCode = data => q({\n  url: '/Api/Common/VerifyCode/getImageCode',\n  method: 'POST',\n  data\n})\n\nexport const checkVerifyCode = data => q({\n  url: '/Api/Common/VerifyCode/checkVerifyCodeNew',\n  method: 'POST',\n  data\n})\n\nexport const sendCode = data => q({\n  url: '/Api/Common/VerifyCode/sendCode',\n  method: 'POST',\n  data\n})\n\nexport const uploadBase64Img = data => q({\n  url: '/Api/User/UploadFile/uploadBase64Img',\n  method: 'POST',\n  data\n})\n\nexport const uploadVideo = data => q({\n  url: '/Api/User/UploadFile/uploadVideo',\n  method: 'POST',\n  data,\n})\n\nexport const uploadLargeVideo = (data, opts = {}) => q({\n  url: '/Api/User/UploadFile/uploadLargeVideo',\n  method: 'POST',\n  data,\n  opts\n})\n\nexport const uploadFileToken = data => q({\n  url: '/Api/User/UploadFile/uploadFileToken',\n  method: 'POST',\n  data,\n})\n\n// export const uploadFromWangSu = async (file, type, mediaType) => {\n//   const {ok, data, msg} = await uploadFileToken({\n//     type,\n//     mediaType\n//   })\n//   if (!ok) throw new Error(`msg:${msg},can not get sdk token`)\n//   const _uploader = wangsu.wcsUpload(file, data.token, data.uploadUrl, {\n//     timeout: 25000,\n//     retryCount: 4,\n//   })\n//   // 获取文件etag\n//   // wangsu.getEtagHash(file,res => {\n//   //   console.log(res);\n//   // })\n//   return await new Promise((resolve, reject) => {\n//     _uploader.onError = error => {\n//       console.error('wangsu upload error', error);\n//       reject({\n//         ok:false,\n//         msg: `code:${error.code},isRequestError:${error.isRequestError} message:${error.message}`\n//       })\n//     }\n//     _uploader.onComplete = res => {\n//       resolve({\n//         ok: true,\n//         msg: \"上传成功\",\n//         data: {\n//           name: data.imageUrl\n//         }\n//       })\n//     }\n//     _uploader.putFile()\n//   })\n// }\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","stepActive","_v","class","isVerifying","_s","$root","userInfo","_e","model","value","form","callback","$$v","$set","expression","getImageUrl","idCardFrontImg","scopedSlots","_u","key","fn","proxy","readImage","nativeOn","$event","e","uploadID","name","apply","arguments","idCardReverseImg","on","onNext","onReCertify","staticStyle","ref","time","finish","_l","item","index","code","join","readVideo","$toast","showUploadProgress","currentRate","toFixed","onDialogClose","showSuccessTip","staticRenderFns","checkId1","IdentityCodeValid","city","tip","pass","test","substr","length","split","factor","parity","sum","ai","wi","i","checkId2","identityIDCard","idCardReg","errorMessage","isPass","match","parseInt","last","toString","checkIDCard","idcode","weight_factor","check_code","seventeen","substring","arr","len","num","resisue","last_no","idcard_patter","format","data","realName","idCard","faceImg","idCardImg","idCardBackImg","isFaceCollecting","featureCount","uploadInfo","imageUrl","token","uploadUrl","created","window","loading","_this","className","message","beforeClose","done","methods","MD5","uploadLargeVideo","_split2","content","_","chunks","chunk_len","videoBase64","blockOrder","blockNum","fileName","onUploadProgress","_this2","uploadIndex","upload","finishUpload","fs","type","_this3","file","_filePath","_file","imgFile","msg","_this4","submit","addRealNameAuth","_this5","countdownCode","component","getImageCode","q","url","method","sendCode","opts","undefined"],"sourceRoot":""}