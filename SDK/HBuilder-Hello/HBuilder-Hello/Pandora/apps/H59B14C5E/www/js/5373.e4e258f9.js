"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[5373],{65373:function(t,e,a){a.r(e),a.d(e,{default:function(){return p}});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page graybg page-payments"},[a("div",{staticClass:"bankCardsWrapper"},[a("div",{staticClass:"bankCards"},[a("van-tabs",{attrs:{"before-change":t.handleBeforeTabsChange},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tab",{attrs:{title:"普通收付"}}),a("van-tab",{attrs:{title:"商家收付"}})],1),a("div",{staticClass:"title",on:{click:function(e){t.$router.push(t.branchRouterPath("/banks"))}}},[a("span",{staticClass:"label"},[t._v(" 银行卡 ")]),t.bank.list.length?a("span",{staticClass:"count"},[t._v(" 全部 （"+t._s(t.bank.list.length)+"） ")]):t._e()]),t.bank.list.length?a("div",{staticClass:"cards"},[t._l(t.bank.list,(function(e,n){return[n<2?a("div",{key:n,class:"card bg"+n},[a("van-image",{attrs:{src:t.$root.getImageUrl(e.logoImg),round:""}}),a("div",{staticClass:"bankInfo"},[a("div",{staticClass:"top"},[a("span",{staticClass:"bankName"},[t._v(" "+t._s(t.bankIdMappingName[e.bankId])+" ")]),a("span",{staticClass:"bankNum"},[t._v(" ****"+t._s(e.bankNo.slice(-4))+" ")])]),a("div",{staticClass:"bankStatus"},[t._v("可转账")])])],1):t._e()]}))],2):[a("div",{staticClass:"bank-empty"}),a("div",{staticClass:"empty-tip"},[t._v("你还未绑定银行卡")])]],2)]),t.hideAlipayWechat?t._e():a("div",{staticClass:"payment"},[a("div",{staticClass:"title border_bottom_1px",on:{click:function(e){t.$router.push(t.branchRouterPath("/wechats"))}}},[a("span",{staticClass:"icon wechat"}),a("span",{staticClass:"label"},[t._v(" 微信 ")]),t.wechat.list.length?a("span",{staticClass:"count"},[t._v(" 全部 （"+t._s(t.wechat.list.length)+"） ")]):a("span",{staticClass:"count"},[t._v(" 未绑定 ")]),a("van-icon",{attrs:{name:"arrow"}})],1),t._l(t.wechat.list,(function(e,n){return[0==n?a("div",{key:n,staticClass:"paymentCard"},[a("div",{staticClass:"icon wechat"}),a("div",{staticClass:"info"},[a("div",[t._v("微信真实姓名："+t._s(t._f("safeText")(e.wxRealname)))]),a("div",[t._v("姓名："+t._s(t._f("safeRealName")(e.realName)))])]),a("van-image",{staticClass:"qr",attrs:{src:t.$root.getImageUrl(e.receiptCode)}})],1):t._e()]}))],2),t.hideAlipayWechat?t._e():a("div",{staticClass:"payment"},[a("div",{staticClass:"title border_bottom_1px",on:{click:function(e){t.$router.push(t.branchRouterPath("/alipays"))}}},[a("span",{staticClass:"icon ali"}),a("span",{staticClass:"label"},[t._v(" 支付宝 ")]),t.ali.list.length?a("span",{staticClass:"count"},[t._v(" 全部 （"+t._s(t.ali.list.length)+"） ")]):a("span",{staticClass:"count"},[t._v(" 未绑定 ")]),a("van-icon",{attrs:{name:"arrow"}})],1),t._l(t.ali.list,(function(e,n){return[0==n?a("div",{key:n,staticClass:"paymentCard"},[a("div",{staticClass:"icon ali"}),a("div",{staticClass:"info"},[a("div",[t._v("支付宝账号："+t._s(t._f("safeText")(e.alipayAccount)))]),a("div",[t._v("姓名："+t._s(t._f("safeRealName")(e.realName)))])]),a("van-image",{staticClass:"qr",attrs:{src:t.$root.getImageUrl(e.receiptCode)}})],1):t._e()]}))],2),a("div",{staticClass:"payment"},[a("div",{staticClass:"title border_bottom_1px",on:{click:function(e){t.$router.push(t.branchRouterPath("/usdts"))}}},[a("span",{staticClass:"icon usdt"}),a("span",{staticClass:"label"},[t._v(" USDT收款 ")]),t.usdt.list.length?a("span",{staticClass:"count"},[t._v(" 全部 （"+t._s(t.usdt.list.length)+"） ")]):a("span",{staticClass:"count"},[t._v(" 未绑定 ")]),a("van-icon",{attrs:{name:"arrow"}})],1),t._l(t.usdt.list,(function(e,n){return[0==n?a("div",{key:n,staticClass:"paymentCard"},[a("div",{staticClass:"icon usdt"}),a("div",{staticClass:"info"},[a("div",[t._v("USDT收款地址："+t._s(t._f("safeText")(e.usdtAddress)))]),a("div",[t._v("姓名："+t._s(t._f("safeRealName")(e.realName)))])])]):t._e()]}))],2),a("van-button",{staticClass:"block primary",on:{click:function(e){t.$router.push(t.branchRouterPath("/add_payment"))}}},[a("van-icon",{attrs:{name:"add"}}),t._v(" 添加收付方式 ")],1)],1)},s=[],r=a(7067),i=a(49749),o=(a(85827),a(41539),a(74916),a(15306),a(89828)),c={mixins:[o.mi],computed:{active:{get:function(){return this.isMerchant?1:0}},bank:function(){return this.payments.bank},ali:function(){return this.payments.ali},wechat:function(){return this.payments.wechat},usdt:function(){return this.payments.usdt},bankIdMappingName:function(){return this.$root.banks.reduce((function(t,e){return(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},e.bankId,e.bankName))}),{})}},created:function(){this.$root.loadPayments(),this.$root.updateUnReadCount(),this.$root.$emit("root:set-topbar",["notices","customer-service"]),this.$root.$emit("root:set-layout",{bottom:!0})},methods:{handleBeforeTabsChange:function(t){if(t===this.active)return!0;0===t&&this.$router.replace("/payments"),1===t&&this.$router.replace("/payments/merchant")},branchRouterPath:function(t){return this.isMerchant&&(t+="?m=1"),t}}},u=c,l=a(1001),d=(0,l.Z)(u,n,s,!1,null,null,null),p=d.exports},89828:function(t,e,a){a.d(e,{RY:function(){return l},VM:function(){return d},fN:function(){return u},mi:function(){return p}});var n=a(49749),s=a(52336),r=a(39873),i=(a(56977),a(54678),a(32564),a(83040),a(12879)),o=a(75461),c=["ok","data","msg"],u={data:function(){return{cryptoAccountInfo:{address:"",otcTicker:""}}},methods:{businessGetAccountInfo:function(t){var e=this;return(0,r.Z)(regeneratorRuntime.mark((function a(){var r,o,u,l,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,(0,i.bb)({type:t});case 2:return r=a.sent,o=r.ok,u=r.data,l=r.msg,d=(0,s.Z)(r,c),o?(e.cryptoAccountInfo=u,e.updateQRcode()):e.$toast(l),a.abrupt("return",(0,n.Z)({ok:o,data:u,msg:l},d));case 9:case"end":return a.stop()}}),a)})))()},updateQRcode:function(t){o.toDataURL(t||this.cryptoAccountInfo.address).then((function(t){var e=document.querySelector(".QRcode");e&&e.setAttribute("src",t)}))}}},l={computed:{isCryptoMerchant:function(){return"1"===this.$route.query.m},amICryptoMerchant:function(){return 1===this.$root.userInfo.BusinessStatus},ApiPath:function(){return this.isCryptoMerchant?"Business":""},BuyerApiPath:function(){return this.isCryptoMerchant&&this.amICryptoMerchant?"Business":""}}},d={data:function(){return{countdown:0,orderType:"TronDeposit",form:{paymentType:"",amount:""},orderInfo:{userId:null,paymentType:"",amount:"",passageType:"",receivingAddress:"",copeAmount:0,createDate:"",status:"",createTime:"",updateTime:"",orderId:0,orderNo:""}}},computed:{isTrading:function(){return!!this.orderInfo.orderId}},created:function(){this.getDepositDetail(this.isBuyVb)},methods:{getDepositDetail:function(){var t=arguments,e=this;return(0,r.Z)(regeneratorRuntime.mark((function a(){var n,s,r,o,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]&&t[0],a.next=3,(0,i.IA)({orderType:e.orderType});case 3:s=a.sent,r=s.ok,o=s.data,c=s.msg,r?o&&(e.$set(e,"orderInfo",o.order),e.form.amount=n?o.order.amount:o.order.copeAmount,e.form.paymentType=o.order.paymentType,e.cryptoAccountInfo.address=o.order.receivingAddress,e.cryptoAccountInfo.otcTicker=parseFloat(String(o.order.amount/o.order.copeAmount)).toFixed(2),e.updateQRcode(),o.currentStateExpireTime&&(o.currentStateExpireTime.expire?(e.countdown=1e3*o.currentStateExpireTime.expire-e.$root.getServerTime(),e.countdown>0&&(u=setTimeout((function(){return e.getDepositDetail(n)}),5e3),e.$once("hook:beforeDestroy",(function(){return clearTimeout(u)})))):e.countdown=0)):e.$toast(c);case 8:case"end":return a.stop()}}),a)})))()}}},p={computed:{isMerchant:function(){return"1"===this.$route.query.m||"merchant"===this.$route.params.type},hideAlipayWechat:function(){return this.isMerchant&&!this.$root.isMerchantAlipayWechatOpen},hideAlipayWechatAtMerchantPage:function(){return!this.$root.isMerchantAlipayWechatOpen},payments:function(){return this.isMerchant?this.$root.merchantPayments:this.$root.payments}}}}}]);
//# sourceMappingURL=5373.e4e258f9.js.map