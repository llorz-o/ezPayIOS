"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[3518],{85244:function(t,s,a){a.d(s,{Z:function(){return c}});var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("span",t._g(t._b({staticClass:"Refresh"},"span",t.$attrs,!1),t.$listeners),[t.loading?a("van-loading",{attrs:{size:"20",type:"spinner"}}):a("van-icon",{attrs:{name:"replay",size:"20"}})],1)},n=[],r={props:{loading:Boolean}},i=r,l=a(1001),o=(0,l.Z)(i,e,n,!1,null,"2b15b292",null),c=o.exports},63518:function(t,s,a){a.r(s),a.d(s,{default:function(){return C}});var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"page page-earn"},[a("div",{staticClass:"fixedDashBoard"},[a("div",{staticClass:"merchant"},[a("div",{staticClass:"left"},[a("MerchantAvatar",{attrs:{avatar:t.$root.userInfo.avatar,level:t.level}}),a("van-button",{staticClass:"primary danger btnUpgrade",attrs:{size:"mini",to:"/agreement_detail"}},[t._v(" "+t._s(t.levelStr)+" ")])],1),a("div",{staticClass:"right"},[a("van-field",{staticClass:"deposit",attrs:{value:t._f("amountFormat")(t.$root.cryptoMerchantInfo.businessAssureBalance,{places:4}),label:"保证金(USDT):",readonly:""},scopedSlots:t._u([{key:"button",fn:function(){return[a("Refresh",{staticClass:"refreshBalance",attrs:{loading:t.balanceLoadings.loading1},on:{click:function(s){return t.refreshBalance("loading1")}}}),a("van-button",{staticClass:"btnField",attrs:{to:"/deposit_transfer/deposit_transfer_in",type:"primary",plain:"",hairline:"",size:"mini"}},[t._v(" 划转 ")])]},proxy:!0}])}),a("van-field",{staticClass:"interest",attrs:{value:t._f("amountFormat")(t.$root.cryptoMerchantInfo.interestSettlement,{places:4}),label:"利息(USDT):",readonly:""},scopedSlots:t._u([{key:"button",fn:function(){return[a("Refresh",{staticClass:"refreshBalance",attrs:{loading:t.balanceLoadings.loading2},on:{click:function(s){return t.refreshBalance("loading2")}}}),a("van-button",{staticClass:"btnField",attrs:{type:"primary",plain:"",hairline:"",size:"mini"},on:{click:t.marginInrerest}},[t._v(" 领取 ")])]},proxy:!0}])}),a("van-field",{staticClass:"merchantBalance",attrs:{value:t._f("amountFormat")(t.$root.cryptoMerchantInfo.businessBalance),label:"商家余额(V币):",readonly:""},scopedSlots:t._u([{key:"button",fn:function(){return[a("Refresh",{staticClass:"refreshBalance",attrs:{loading:t.balanceLoadings.loading3},on:{click:function(s){return t.refreshBalance("loading3")}}}),a("div",{staticClass:"space"})]},proxy:!0}])})],1)]),a("div",{staticClass:"actions"},[a("van-button",{attrs:{type:"info",size:"small",plain:"",to:"/trans_in_balance/trans_in_balance_from_blockchain"}},[t._v(" 转入 ")]),a("van-button",{attrs:{type:"info",size:"small",plain:"",to:"/merchant_balance_transout"}},[t._v("转出")]),a("van-button",{staticClass:"primary",attrs:{size:"small",to:"/sale?m=1"}},[t._v("开始赚钱")])],1),a("van-sticky",{attrs:{"offset-top":"12.267vw"}},[a("van-dropdown-menu",{staticClass:"border_bottom_1px"},[a("van-dropdown-item",{ref:"payment_method",attrs:{title:"收款方式"}},[a("van-cell",{staticClass:"selections",attrs:{border:!1}},[a("van-checkbox-group",{model:{value:t.query.paymentType,callback:function(s){t.$set(t.query,"paymentType",s)},expression:"query.paymentType"}},[a("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.BANK}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 银行卡转账")])],1),a("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.WE_CHAT}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 微信转账")])],1),a("van-checkbox",{staticClass:"btn",attrs:{name:t.PAYMENT_METHOD.ALI}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 支付宝转账")])],1)],1)],1),a("van-cell",{staticClass:"btns"},[a("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetPaymentMethod}},[t._v(" 重置 ")]),a("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(s){return t.load("payment_method")}}},[t._v(" 确定 ")])],1)],1),a("van-dropdown-item",{ref:"status",attrs:{title:"状态"}},[a("van-cell",{staticClass:"selections",attrs:{border:!1}},[a("div",{staticClass:"group"},[a("van-checkbox",{staticClass:"btn",model:{value:t.query.isTransacting,callback:function(s){t.$set(t.query,"isTransacting",s)},expression:"query.isTransacting"}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 已发起交易")])],1),a("van-checkbox",{staticClass:"btn",model:{value:t.query.isHanging,callback:function(s){t.$set(t.query,"isHanging",s)},expression:"query.isHanging"}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},slot:"icon"},[t._v(" 挂单中")])],1)],1)]),a("van-cell",{staticClass:"btns"},[a("van-button",{staticClass:"cancel",attrs:{type:"danger"},on:{click:t.resetStatus}},[t._v(" 重置 ")]),a("van-button",{staticClass:"confirm",attrs:{type:"primary"},on:{click:function(s){return t.load("status")}}},[t._v(" 确定 ")])],1)],1),a("van-dropdown-item",{ref:"split_status",attrs:{title:"是否可拆分"}},[a("van-cell",{staticClass:"selections",attrs:{border:!1}},[a("van-radio-group",{on:{change:function(s){return t.onChangeSplitStatus(s)}},model:{value:t.query.isSplit,callback:function(s){t.$set(t.query,"isSplit",s)},expression:"query.isSplit"}},[a("van-radio",{staticClass:"btn",attrs:{name:1}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(s){return t.cancelSelect(1)}},slot:"icon"},[t._v(" 可拆分 ")])],1),a("van-radio",{staticClass:"btn",attrs:{name:0}},[a("van-button",{staticClass:"btn",attrs:{slot:"icon"},on:{click:function(s){return t.cancelSelect(0)}},slot:"icon"},[t._v(" 不可拆分 ")])],1)],1)],1)],1)],1)],1)],1),a("van-list",{attrs:{"error-text":t.errorText,error:t.error,finished:t.finished,"finished-text":"暂无更多数据"},on:{"update:error":function(s){t.error=s},load:t.search},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(t.list,(function(t,s){return a("HangOrderItem",{key:s,attrs:{dt:t}})})),1)],1)},n=[],r=a(12879),i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"avatar MerchantAvatar",class:[t.level]},[a("van-image",{attrs:{src:t.$root.getImageUrl(t.avatar),fit:"cover",round:""}},[a("div",{staticClass:"defaultAvatar size30",attrs:{slot:"error"},slot:"error"})]),a("div",{staticClass:"cover"})],1)},l=[],o={name:"MerchantAvatar",props:{level:String,avatar:String},computed:{levelStr:function(){if(this.level){if("normal"===this.level)return"黄金";if("platinum"===this.level)return"铂金";if("diamond"===this.level)return"钻石";if("crown"===this.level)return"皇冠"}}}},c=o,u=a(1001),d=(0,u.Z)(c,i,l,!1,null,null,null),p=d.exports,h=a(86947),m=a(31581),v=a(39155),f=a(42558),y=a(85244),g=v.Z.extend({components:{HangOrderItem:f.K,MerchantAvatar:p,Refresh:y.Z},data(){return{PAYMENT_METHOD:h.hL,list:[],loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",page:1,pageSize:20,query:{isTransacting:!1,isHanging:!1,isSplit:"",paymentType:[]},balanceLoadings:{loading1:!1,loading2:!1,loading3:!1}}},computed:{level(){const t=this.$root.cryptoMerchantInfo.level.matchingLevel;return"ORDINARY"===t?"normal":"Platinum"===t?"platinum":"Diamond"===t?"diamond":"CROWN"===t?"crown":"普通"},levelStr(){if(this.level)return console.log("level==",this.level),"normal"===this.level?"黄金":"platinum"===this.level?"铂金":"diamond"===this.level?"钻石":"crown"===this.level?"皇冠":"普通"}},watch:{query:{deep:!0,handler(){this.page=1,this.list=[]}}},created(){this.$root.getCryptoMerchantInfo()},methods:{async refreshBalance(t){this.balanceLoadings[t]=!0,await this.$root.getCryptoMerchantInfo(),this.balanceLoadings[t]=!1},search(){(0,r.$Z)(this.$tls.processParams({page:this.page,pageSize:this.pageSize,isSplit:this.query.isSplit,paymentType:this.query.paymentType.reduce(((t,s)=>Number(t)+Number(s)),0),inProgress:this.query.isTransacting?1:"",status:this.query.isHanging?1:""},["shake"])).then((({ok:t,data:s,msg:a})=>{this.loading=!1,t?(1==this.page?this.list=s.list||[]:this.list.push(...s.list||[]),this.finished=this.page*this.pageSize>=s.total,this.page+=1):(this.error=!0,this.errorText=a)}))},resetPaymentMethod(){this.query.paymentType=[],this.load("payment_method")},resetStatus(){this.query.isTransacting=!1,this.query.isHanging=!1,this.load("status")},load(t){this.page=1,this.$refs[t].toggle(!1),this.search()},onChangeSplitStatus(t){m.ZP.isNumber(t)&&this.load("split_status")},cancelSelect(t){this.query.isSplit===t&&setTimeout((()=>{this.query.isSplit="",this.load("split_status")}),50)},async marginInrerest(){const{ok:t,data:s,msg:a}=await(0,r.xH)();t?this.$toast.success("领取成功"):this.$toast.fail(a)}}}),_=g,b=(0,u.Z)(_,e,n,!1,null,null,null),C=b.exports},42558:function(t,s,a){a.d(s,{K:function(){return c},A:function(){return v}});var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"hang-order",on:{click:function(s){return t.$router.push("/my_hang_order/"+t.dt.pendingOrderId+"?m="+("Business"===t.dt.sellerType?1:0))}}},[a("div",{staticClass:"time"},[t._v(" 挂单时间 "+t._s(t._f("dateFormat")(t.dt.createTime,"M/D h:m:s"))+" ")]),a("div",{staticClass:"content"},[a("span",{staticClass:"payment-method"},t._l(t.payments,(function(t,s){return a("div",{key:s,staticClass:"item",class:"pay"+t})})),0),a("span",{staticClass:"order-type"},[t._v(t._s(t.dt.isSplit?"可拆分":"不可拆分"))]),a("span",{staticClass:"amount"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.validAmount,{places:0}))+" V币 ")]),a("span",{staticClass:"order-status",class:t.stateClass},[t._v(" "+t._s(t.stateStr)+" ")]),a("van-icon",{attrs:{name:"arrow"}})],1)])},n=[],r=(a(83710),{name:"hangOrderItem",props:{dt:{type:Object,default:function(){return{createTime:(new Date).toLocaleDateString(),paymentType:7,isSplit:0,amount:"13076598",status:1,underwayOrder:1}}}},computed:{stateClass:function(){return this.dt.underwayOrder>0?"underway":1===this.dt.status?"hanging":0===this.dt.status?"closed":void 0},stateStr:function(){return 1==this.dt.frozen?"冻结":this.dt.underwayOrder>0?"已发起交易":1===this.dt.status?"挂单中...":0===this.dt.status?this.dt.amount==this.dt.soldAmount?"已售罄":"取消挂单":void 0},payments:function(){return this.$root.parsePayments(this.dt.paymentType)}},methods:{}}),i=r,l=a(1001),o=(0,l.Z)(i,e,n,!1,null,"e930966c",null),c=o.exports,u=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"transaction",on:{click:function(s){return t.$router.push("/"+(t.isSale?"transaction_sale":"transaction_buy")+"/"+t.dt.orderId+"?m="+("Business"===t.dt.sellerType?1:0))}}},[a("span",{staticClass:"inout bg",class:t.isSale?"out":"in"},[t._v(" "+t._s(t.isSale?"卖":"买")+" ")]),a("span",{staticClass:"time"},[t._v(" "+t._s(t.ymd)+" "),a("br"),t._v(" "+t._s(t.hms)+" ")]),a("span",{staticClass:"amountEl"},[a("span",{staticClass:"amount",class:t.isSale?"out":"in"},[t._v(" "+t._s(t._f("amountFormat")(t.dt.amount))+" ")]),a("span",{staticClass:"unit"},[t._v(" V币 ")])]),a("span",{staticClass:"order-status",class:t._f("transactingOrderStatus")(t.dt.status)},[t._v(" "+t._s(t._f("transactingOrderStatus")(t.dt.status,"seller-content"))+" ")])])},d=[],p=(a(47042),{name:"TransactionItem",props:{dt:{type:Object,default:function(){return{orderType:1,time:(new Date).toLocaleDateString(),amount:"0",orderStatus:"WaitingSellerConfirm"}}}},computed:{orderTime:function(){return this.$options.filters.dateFormat(this.dt.createTime,"Y/M/D h:m:s")},ymd:function(){return this.orderTime.slice(0,10)},hms:function(){return this.orderTime.slice(11)},isSale:function(){return!!this.$root.userInfo&&(this.dt.sellerId==this.$root.userInfo.userId&&("Member"===this.dt.sellerType||"Business"===this.dt.sellerType))}}}),h=p,m=(0,l.Z)(h,u,d,!1,null,"2c263b2e",null),v=m.exports}}]);
//# sourceMappingURL=3518.20448450.js.map