"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[7745],{47745:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page page-crypto-order-detail"},[r("van-cell",{attrs:{title:"订单编号"}},[r("van-field",{attrs:{value:e.orderInfo.orderNo,readonly:""}}),r("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.orderInfo.orderNo,expression:"orderInfo.orderNo"}],staticClass:"copy copyBtn",attrs:{slot:"right-icon"},on:{success:e.$root.copySuccessful},slot:"right-icon"})],1),r("van-steps",{attrs:{active:e.step-1}},[r("van-step",[e._v(" "+e._s(e._f("dateFormat")(new Date,"M/D"))+" "),r("div",{staticClass:"bottom-status time"},[e._v(" "+e._s(e._f("dateFormat")(new Date,"h:m:s"))+" ")])]),r("van-step",[e._v(" 区块确认 "),e.step>=2?r("div",{staticClass:"bottom-status",class:e.stepDescClass(e.stepStatus(2))},[e._v(" "+e._s(e.stepDesc(2))+" ")]):e._e()]),r("van-step",[e._v(" 货币归集 "),e.step>=3?r("div",{staticClass:"bottom-status",class:e.stepDescClass(e.stepStatus(3))},[e._v(" "+e._s(e.stepDesc(3))+" ")]):e._e()]),r("van-step",[e._v(" 交易完成 "),e.step>=4?r("div",{staticClass:"bottom-status",class:e.stepDescClass(e.stepStatus(4))},[e._v(" "+e._s(e.stepDesc(4))+" ")]):e._e()])],1),e.orderInfo.receivingAddress?r("img",{staticClass:"QRcode",attrs:{alt:"qr code"}}):e._e(),r("div",{staticClass:"notice"},[e._v("此地址只可接受"+e._s(e.orderInfo.paymentType))]),r("van-cell-group",[r("van-cell",{attrs:{title:"转入地址"}},[r("van-field",{attrs:{value:e.orderInfo.receivingAddress,readonly:""}}),r("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.orderInfo.receivingAddress,expression:"orderInfo.receivingAddress"}],staticClass:"copy copyBtn",attrs:{slot:"right-icon"},on:{success:e.$root.copySuccessful},slot:"right-icon"})],1),r("van-cell",{attrs:{title:"购买V币金额"}},[r("van-field",{attrs:{"input-align":"right",readonly:"",value:e._f("amountFormat")(e.orderInfo.amount)},scopedSlots:e._u([{key:"extra",fn:function(){return[r("span",[e._v("V币")])]},proxy:!0}])})],1),r("van-cell",{attrs:{title:"应付"+e.orderInfo.paymentType}},[r("van-field",{attrs:{"input-align":"right",readonly:"",value:e._f("amountFormat")(e.orderInfo.copeAmount)},scopedSlots:e._u([{key:"extra",fn:function(){return[r("span",[e._v(" "+e._s(e.orderInfo.paymentType))])]},proxy:!0}])})],1),r("van-cell",{attrs:{title:"实付"+e.orderInfo.paymentType}},[r("van-field",{attrs:{"input-align":"right",readonly:"",value:e._f("amountFormat")(e.orderInfo.actualAmount)},scopedSlots:e._u([{key:"extra",fn:function(){return[r("span",[e._v(" "+e._s(e.orderInfo.paymentType))])]},proxy:!0}])})],1),r("van-cell",{attrs:{title:"到账V币金额"}},[r("van-field",{attrs:{"input-align":"right",readonly:"",value:e._f("amountFormat")(e.orderInfo.depositAmount)},scopedSlots:e._u([{key:"extra",fn:function(){return[r("span",[e._v("V币")])]},proxy:!0}])})],1)],1),r("van-cell",{attrs:{title:e.orderInfo.paymentType+"价格"}},[r("van-field",{attrs:{"input-align":"right",readonly:"",value:e._f("amountFormat")(e.orderInfo.feeRate)},scopedSlots:e._u([{key:"extra",fn:function(){return[r("span",[e._v("￥")])]},proxy:!0}])})],1)],1)},a=[],o=r(39873),s=(r(83040),r(12879)),i=r(89828),c={mixins:[i.fN],data:function(){return{orderNo:"",transinAddr:"",coinType:"",orderInfo:{orderId:0,orderNo:"",userId:0,paymentType:"",passageType:"",amount:"",copeAmount:"",actualAmount:"",receivingAddress:"",paymentAddress:"",appeal:0,operatorAdminId:0,status:"",createDate:"",createTime:"",finishDate:"",finishTime:"",updateTime:"",txid:"",remark:"",toTxid:"",feeRate:0}}},created:function(){this.$root.$emit("root:set-topbar",["left-back","customer-service"]),this.getOrderDetail()},computed:{step:function(){switch(this.orderInfo.status){case"CollectedSuccess":return 4;case"CollectedFail":case"WaitingCollected":return 3;case"WaitingTransfer":case"TransferTimeOut":case"AutoCancel":case"Manualcancel":return 2;default:return 1}}},methods:{stepDescClass:function(e){return 1===e?"success":0===e?"failed":-1===e?"normal":void 0},stepStatus:function(e){if(2===e&&this.step>2)return 1;if(3===e&&this.step>3)return 1;switch(this.orderInfo.status){case"CollectedSuccess":return 1;case"WaitingTransfer":case"WaitingCollected":return-1;case"CollectedFail":case"AutoCancel":case"Manualcancel":case"TransferTimeOut":return 0;default:break}},stepDesc:function(e){if(2===e&&this.step>2)return"已确认";if(3===e&&this.step>3)return"已归集";switch(this.orderInfo.status){case"WaitingTransfer":return"等待转账";case"TransferTimeOut":return"转账超时";case"WaitingCollected":return"等待归集";case"CollectedFail":return"归集失败";case"CollectedSuccess":return"订单完成";case"AutoCancel":return"自动取消";case"Manualcancel":return"人工取消";default:break}},getOrderDetail:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.dz)({orderNo:e.$route.params.orderNo});case 2:r=t.sent,n=r.ok,a=r.data,o=r.msg,n?(e.orderInfo=a.order,e.updateQRcode(e.orderInfo.receivingAddress)):e.$toast(o);case 7:case"end":return t.stop()}}),t)})))()}}},u=c,d=r(1001),p=(0,d.Z)(u,n,a,!1,null,null,null),l=p.exports},89828:function(e,t,r){r.d(t,{RY:function(){return d},VM:function(){return p},fN:function(){return u},mi:function(){return l}});var n=r(49749),a=r(52336),o=r(39873),s=(r(56977),r(54678),r(32564),r(83040),r(12879)),i=r(75461),c=["ok","data","msg"],u={data:function(){return{cryptoAccountInfo:{address:"",otcTicker:""}}},methods:{businessGetAccountInfo:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var o,i,u,d,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,s.bb)({type:e});case 2:return o=r.sent,i=o.ok,u=o.data,d=o.msg,p=(0,a.Z)(o,c),i?(t.cryptoAccountInfo=u,t.updateQRcode()):t.$toast(d),r.abrupt("return",(0,n.Z)({ok:i,data:u,msg:d},p));case 9:case"end":return r.stop()}}),r)})))()},updateQRcode:function(e){i.toDataURL(e||this.cryptoAccountInfo.address).then((function(e){var t=document.querySelector(".QRcode");t&&t.setAttribute("src",e)}))}}},d={computed:{isCryptoMerchant:function(){return"1"===this.$route.query.m},amICryptoMerchant:function(){return 1===this.$root.userInfo.BusinessStatus},ApiPath:function(){return this.isCryptoMerchant?"Business":""},BuyerApiPath:function(){return this.isCryptoMerchant&&this.amICryptoMerchant?"Business":""}}},p={data:function(){return{countdown:0,orderType:"TronDeposit",form:{paymentType:"",amount:""},orderInfo:{userId:null,paymentType:"",amount:"",passageType:"",receivingAddress:"",copeAmount:0,createDate:"",status:"",createTime:"",updateTime:"",orderId:0,orderNo:""}}},computed:{isTrading:function(){return!!this.orderInfo.orderId}},created:function(){this.getDepositDetail(this.isBuyVb)},methods:{getDepositDetail:function(){var e=arguments,t=this;return(0,o.Z)(regeneratorRuntime.mark((function r(){var n,a,o,i,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]&&e[0],r.next=3,(0,s.IA)({orderType:t.orderType});case 3:a=r.sent,o=a.ok,i=a.data,c=a.msg,o?i&&(t.$set(t,"orderInfo",i.order),t.form.amount=n?i.order.amount:i.order.copeAmount,t.form.paymentType=i.order.paymentType,t.cryptoAccountInfo.address=i.order.receivingAddress,t.cryptoAccountInfo.otcTicker=parseFloat(String(i.order.amount/i.order.copeAmount)).toFixed(2),t.updateQRcode(),i.currentStateExpireTime&&(i.currentStateExpireTime.expire?(t.countdown=1e3*i.currentStateExpireTime.expire-t.$root.getServerTime(),t.countdown>0&&(u=setTimeout((function(){return t.getDepositDetail(n)}),5e3),t.$once("hook:beforeDestroy",(function(){return clearTimeout(u)})))):t.countdown=0)):t.$toast(c);case 8:case"end":return r.stop()}}),r)})))()}}},l={computed:{isMerchant:function(){return"1"===this.$route.query.m||"merchant"===this.$route.params.type},hideAlipayWechat:function(){return this.isMerchant&&!this.$root.isMerchantAlipayWechatOpen},hideAlipayWechatAtMerchantPage:function(){return!this.$root.isMerchantAlipayWechatOpen},payments:function(){return this.isMerchant?this.$root.merchantPayments:this.$root.payments}}}}}]);
//# sourceMappingURL=7745.bf35b86f.js.map