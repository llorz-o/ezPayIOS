{"version":3,"file":"js/3232.c02f2ae2.js","mappings":"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","sources":["webpack://ez_pay/./src/views/merchant_balance_transout/index.vue?62af","webpack://ez_pay/src/views/merchant_balance_transout/index.vue","webpack://ez_pay/./src/views/merchant_balance_transout/index.vue?d8fe","webpack://ez_pay/./src/views/merchant_balance_transout/index.vue","webpack://ez_pay/./src/vendor/globalVerify.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page page-merchant-balance-transout\"},[_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"商家余额\"}},[_c('van-field',{attrs:{\"value\":_vm._f(\"amountFormat\")(_vm.$root.cryptoMerchantInfo.businessBalance),\"readonly\":\"\",\"colon\":\"\",\"input-align\":\"right\"},scopedSlots:_vm._u([{key:\"extra\",fn:function(){return [_vm._v(\" V币 \")]},proxy:true}])})],1),_c('van-cell',{attrs:{\"title\":\"转出至\"}},[_c('van-field',{staticClass:\"bold\",attrs:{\"value\":\"VipPay钱包余额\",\"readonly\":\"\",\"colon\":\"\",\"input-align\":\"right\"}})],1),_c('van-cell',{attrs:{\"title\":\"转出前VipPay钱包余额\"}},[_c('van-field',{attrs:{\"value\":_vm._f(\"amountFormat\")(_vm.$root.userInfo.balance),\"readonly\":\"\",\"colon\":\"\",\"input-align\":\"right\"},scopedSlots:_vm._u([{key:\"extra\",fn:function(){return [_vm._v(\" V币 \")]},proxy:true}])})],1),_c('van-cell',{attrs:{\"title\":\"转出金额\"}},[_c('van-field',{attrs:{\"formatter\":_vm.formmatCryptoBalance,\"placeholder\":\"请输入转出金额\",\"colon\":\"\",\"input-align\":\"right\"},model:{value:(_vm.amount),callback:function ($$v) {_vm.amount=$$v},expression:\"amount\"}},[_c('van-button',{attrs:{\"slot\":\"button\",\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.amount = parseFloat(_vm.$root.cryptoMerchantInfo.businessBalance).toFixed(2)}},slot:\"button\"},[_vm._v(\" 全部 \")])],1)],1),_c('van-cell',{attrs:{\"title\":\"转出后VipPay钱包余额\"}},[_c('van-field',{attrs:{\"value\":_vm._f(\"amountFormat\")(_vm.businessBalance),\"readonly\":\"\",\"colon\":\"\",\"input-align\":\"right\"},scopedSlots:_vm._u([{key:\"extra\",fn:function(){return [_vm._v(\" V币 \")]},proxy:true}])})],1)],1),_c('van-button',{staticClass:\"primary block\",on:{\"click\":_vm.businessDeposit}},[_vm._v(\" 确定转出 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page page-merchant-balance-transout\">\n    <van-cell-group>\n      <van-cell title=\"商家余额\">\n        <van-field\n          :value=\"$root.cryptoMerchantInfo.businessBalance | amountFormat\"\n          readonly\n          colon\n          input-align=\"right\"\n        >\n          <template #extra> V币 </template>\n        </van-field>\n      </van-cell>\n      <van-cell title=\"转出至\">\n        <van-field class=\"bold\" value=\"VipPay钱包余额\" readonly colon input-align=\"right\">\n        </van-field>\n      </van-cell>\n      <van-cell title=\"转出前VipPay钱包余额\">\n        <van-field\n          :value=\"$root.userInfo.balance | amountFormat\"\n          readonly\n          colon\n          input-align=\"right\"\n        >\n          <template #extra> V币 </template>\n        </van-field>\n      </van-cell>\n      <van-cell title=\"转出金额\">\n        <van-field\n          v-model=\"amount\"\n          :formatter=\"formmatCryptoBalance\"\n          placeholder=\"请输入转出金额\"\n          colon\n          input-align=\"right\"\n        >\n          <van-button\n            slot=\"button\"\n            type=\"danger\"\n            size=\"mini\"\n            @click=\"amount = parseFloat($root.cryptoMerchantInfo.businessBalance).toFixed(2)\"\n          >\n            全部\n          </van-button>\n        </van-field>\n      </van-cell>\n      <van-cell title=\"转出后VipPay钱包余额\">\n        <van-field :value=\"businessBalance | amountFormat\" readonly colon input-align=\"right\">\n          <template #extra> V币 </template>\n        </van-field>\n      </van-cell>\n    </van-cell-group>\n    <van-button class=\"primary block\" @click=\"businessDeposit\"> 确定转出 </van-button>\n  </div>\n</template>\n\n<script>\nimport { verifySecuretedCode } from \"@/vendor/globalVerify\";\nimport { businessDeposit } from \"@/apis/crypto\";\nexport default {\n  data() {\n    return {\n      amount: \"\",\n    };\n  },\n  created() {\n    this.$root.$emit(\"root:set-topbar\", [\"left-back\"]);\n    this.$root.getCryptoMerchantInfo();\n  },\n  computed: {\n    businessBalance() {\n      return Number(this.$root.cryptoMerchantInfo.businessBalance) + Number(this.amoun || \"0\");\n    },\n  },\n  methods: {\n    // 格式化转出金额\n    formmatCryptoBalance(value) {\n      if (Number(value) > Number(this.$root.cryptoMerchantInfo.businessBalance)) {\n        return parseFloat(this.$root.cryptoMerchantInfo.businessBalance).toFixed(2);\n      }\n      return value || \"\";\n    },\n    //  钱包转入\n    async businessDeposit() {\n      // 验证金额\n      if (!this.amount) {\n        this.$toast(\"请输入转出金额\");\n        return;\n      }\n      // 验证安全码\n      const securePassword = await verifySecuretedCode(this);\n      const { ok, msg } = await businessDeposit({\n        paymentType: undefined,\n        amount: parseFloat(this.amount).toFixed(2),\n        passageType: \"BusinessTransferVippayOut\",\n        receivingAddress: undefined,\n        securePassword,\n      });\n\n      if (ok) {\n        this.$toast(\"转出成功\");\n        this.$router.back();\n      } else {\n        this.$toast(msg);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.page.page-merchant-balance-transout {\n  .van-cell {\n    &__title {\n      padding-left: 5px;\n      // 粗体\n      font-weight: 600;\n    }\n    &__value {\n      flex: 1;\n      .van-field {\n        padding-top: 0;\n        padding-bottom: 0;\n        &__button {\n          height: 24px;\n          line-height: 24px;\n          overflow: hidden;\n          display: flex;\n          align-items: center;\n        }\n      }\n\n      .bold {\n        font-weight: 600;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=50698758&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {checkGoogleAuthenticator} from \"@/apis/user\";\n\nexport const verifySecuretedCode = vm => {\n  vm.$toast('请输入资金密码')\n  return new Promise((resolve, reject) => {\n    vm.$root.showPassowordKeyboard = true\n    vm.$root.$once('root:global-password', async code => resolve(code))\n  })\n}\n\nexport const verifyGoogleAuth = (vm) => {\n  if (vm.$root.userInfo && vm.$root.userInfo.isGoogleAuthenticator) {\n    vm.$toast('请输入Google安全码')\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        vm.$root.showPassowordKeyboard = true\n        vm.$root.$once('root:global-password', async code => {\n          if (!code || code === 'close-by-route-change') return resolve(false)\n          const {ok, msg} = await checkGoogleAuthenticator({safeCode: code})\n          if (ok) {\n            resolve(true)\n          } else {\n            resolve(false)\n            vm.$toast.fail(msg)\n          }\n        })\n      }, 0)\n    })\n  } else {\n    return Promise.resolve(true)\n  }\n\n}\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_f","$root","cryptoMerchantInfo","businessBalance","scopedSlots","_u","key","fn","_v","proxy","userInfo","balance","formmatCryptoBalance","model","value","callback","$$v","amount","expression","on","$event","parseFloat","toFixed","slot","businessDeposit","staticRenderFns","data","created","computed","methods","_this","_context","verifySecuretedCode","securePassword","paymentType","passageType","receivingAddress","_yield$_businessDepos","ok","msg","component","vm","$toast","Promise","resolve","reject","showPassowordKeyboard","$once","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","code","wrap","prev","next","abrupt","stop","_x","apply","arguments","verifyGoogleAuth","isGoogleAuthenticator","setTimeout","_ref2","_callee2","_yield$checkGoogleAut","_context2","checkGoogleAuthenticator","safeCode","sent","fail","_x2"],"sourceRoot":""}