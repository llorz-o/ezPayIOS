"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[7253],{7253:function(t,e,o){o.r(e),o.d(e,{default:function(){return f}});var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page page-crypto-trading"},[t._m(0),o("van-cell-group",[o("div",{staticClass:"titleSlot",attrs:{slot:"title"},slot:"title"},[o("div",{staticClass:"title"},[t._v("购买V币")]),t.isTrading?o("div",{staticClass:"countdown"},[t._v(" 订单倒计时 "),o("van-count-down",{attrs:{time:t.countdown}})],1):t._e()]),t.cryptoAccountInfo.address&&t.isTrading?o("img",{staticClass:"QRcode",attrs:{alt:"qr code"}}):t._e(),o("div",{staticClass:"notice"},[t._v(" "+t._s(t.form.paymentType?"此地址只可接受"+t.form.paymentType:"选择币种即可获取转币地址")+" ")]),o("van-cell",{attrs:{title:"币种"}},[o("van-field",{attrs:{placeholder:"请选择币种",readonly:"",colon:"","input-align":"right"},on:{click:t.chooseCrypto},model:{value:t.form.paymentType,callback:function(e){t.$set(t.form,"paymentType",e)},expression:"form.paymentType"}}),o("van-icon",{attrs:{slot:"right-icon",name:"exchange"},slot:"right-icon"})],1),t.form.paymentType?o("van-cell",{attrs:{title:"主网"}},[o("van-field",{attrs:{value:"Tronscan(TRC20)",readonly:"",colon:"","input-align":"right"}})],1):t._e(),t.isTrading?o("van-cell",{attrs:{title:"转入地址"}},[o("van-field",{attrs:{readonly:"",colon:"","input-align":"right"},model:{value:t.cryptoAccountInfo.address,callback:function(e){t.$set(t.cryptoAccountInfo,"address",e)},expression:"cryptoAccountInfo.address"}}),o("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.cryptoAccountInfo.address,expression:"cryptoAccountInfo.address"}],staticClass:"copy copyBtn",attrs:{slot:"right-icon"},on:{success:t.$root.copySuccessful},slot:"right-icon"})],1):t._e(),o("van-cell",{attrs:{title:"购买V币数量"}},[o("van-field",{attrs:{formatter:function(e){return t.isTrading?parseFloat(e).toFixed(2):e},readonly:t.isTrading,placeholder:"请输入购买数量100~99999",colon:"","input-align":"right"},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),o("van-cell",{attrs:{title:t.ratio}},[o("van-field",{attrs:{value:"应付:"+t.howMuchRMB,readonly:"",colon:"","input-align":"right"},scopedSlots:t._u([{key:"extra",fn:function(){return[t._v(" "+t._s(t.form.paymentType)+" ")]},proxy:!0}])})],1)],1),o("p",{staticClass:"goHelpbBourse"},[o("span",{on:{click:function(e){return t.$router.push("/helps?index=7")}}},[t._v("交易所操作教程")])]),t.isTrading?o("van-button",{staticClass:"primary block",attrs:{to:"/crypto_order_detail/"+t.orderInfo.orderNo}},[t._v(" 查看订单 ")]):o("van-button",{staticClass:"primary block",on:{click:t.submit}},[t._v(" 提交订单 ")]),t._m(1),o("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[o("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){t.showPicker=!1},confirm:t.onConfirm}})],1)],1)},n=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tip_card"},[o("div",{staticClass:"tips"},[o("h3",[t._v("交易须知")]),o("p",[t._v("1.交易中请实时留意订单状态，请十五分钟内完成转账；")]),o("p",[t._v(" 2.请确保您转币时选择的主网与平台支持的主网一致【Tronscan(TRC20)】，否则可能造成资产丢失； ")]),o("p",[t._v("3.V币汇率锚定人民币汇率，平台使用实时汇率；")]),o("p",[t._v("4.请按汇率计算给出的金额转币，否则可能会造成V币无法及时到账；")]),o("p",[t._v("5.按要求转币后经过一定数量的区块确认后就可以自动到账。")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tips_info"},[o("p",{staticClass:"importance"},[t._v("重要提醒：")]),o("p",[t._v("1.实际到账V币金额=您的转账金额（USDT/TRX）*汇率")]),o("p",[t._v("2.USDT最小转入金额为10USDT，TRX最小转账金额为100TRX，若转账金额小于以上金额系统将会自动取消该笔交易，给您造成不必要的损失")]),o("p",[t._v("3.请务必提交订单后再向系统提供地址转账，否则会造成V币无法到账")])])}],s=o(12879),a=o(86947),i=o(39766),c=o(89828),u=o(39155),p=u.Z.extend({mixins:[c.fN,c.VM],data(){return{columns:a.KV,showPicker:!1,isBuyVb:!0,form:{paymentType:"",amount:""}}},computed:{howMuchRMB(){const{amountFormat:t}=this.$root.$options.filters;return this?.orderInfo?.orderNo?parseFloat(this.orderInfo.copeAmount).toFixed(2):t(this.form.amount&&this.cryptoAccountInfo.otcTicker?this.form.amount/this.cryptoAccountInfo.otcTicker:0,{places:0})},ratio(){return this.form.paymentType?`${this.form.paymentType}价格:￥${this.orderInfo.feeRate||this.cryptoAccountInfo.otcTicker}`:"汇率:￥0.00"}},watch:{"orderInfo.orderNo"(t){t&&this.orderInfo.amount&&(this.form.amount=this.orderInfo.amount)}},methods:{chooseCrypto(){this.isTrading||(this.showPicker=!0)},async onConfirm(t){const{ok:e,data:o,msg:r}=await this.businessGetAccountInfo(t);e?(this.form.amount="",this.form.paymentType=t,this.showPicker=!1,this.updateQRcode()):this.$toast(r)},async submit(){if(!this.form.amount)return void this.$toast("请输入购买数量");if(!this.form.paymentType)return void this.$toast("请选择币种");if(this.form.amount<100||this.form.amount>99999)return void this.$toast("购买数量为 100 到 99999");const t=await(0,i.x)(this);if(!t)return;const{ok:e,data:o,msg:r}=await(0,s.NG)({...this.form,amount:parseFloat(this.form.amount).toFixed(2),passageType:"TronDeposit",receivingAddress:this.cryptoAccountInfo.address,securePassword:t});e?(this.$toast("订单创建成功"),this.getDepositDetail(!0)):this.$toast(r)}}}),d=p,l=o(1001),m=(0,l.Z)(d,r,n,!1,null,null,null),f=m.exports},39766:function(t,e,o){o.d(e,{D:function(){return a},x:function(){return s}});var r=o(39873),n=(o(83040),o(41539),o(32564),o(53045)),s=function(t){return t.$toast("请输入资金密码"),new Promise((function(e,o){t.$root.showPassowordKeyboard=!0,t.$root.$once("root:global-password",function(){var t=(0,r.Z)(regeneratorRuntime.mark((function t(o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e(o));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},a=function(t){return t.$root.userInfo&&t.$root.userInfo.isGoogleAuthenticator?(t.$toast("请输入Google安全码"),new Promise((function(e,o){setTimeout((function(){t.$root.showPassowordKeyboard=!0,t.$root.$once("root:global-password",function(){var o=(0,r.Z)(regeneratorRuntime.mark((function o(r){var s,a,i;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(r&&"close-by-route-change"!==r){o.next=2;break}return o.abrupt("return",e(!1));case 2:return o.next=4,(0,n.Wg)({safeCode:r});case 4:s=o.sent,a=s.ok,i=s.msg,a?e(!0):(e(!1),t.$toast.fail(i));case 8:case"end":return o.stop()}}),o)})));return function(t){return o.apply(this,arguments)}}())}),0)}))):Promise.resolve(!0)}},89828:function(t,e,o){o.d(e,{RY:function(){return p},VM:function(){return d},fN:function(){return u},mi:function(){return l}});var r=o(49749),n=o(52336),s=o(39873),a=(o(56977),o(54678),o(32564),o(83040),o(12879)),i=o(75461),c=["ok","data","msg"],u={data:function(){return{cryptoAccountInfo:{address:"",otcTicker:""}}},methods:{businessGetAccountInfo:function(t){var e=this;return(0,s.Z)(regeneratorRuntime.mark((function o(){var s,i,u,p,d;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,a.bb)({type:t});case 2:return s=o.sent,i=s.ok,u=s.data,p=s.msg,d=(0,n.Z)(s,c),i?(e.cryptoAccountInfo=u,e.updateQRcode()):e.$toast(p),o.abrupt("return",(0,r.Z)({ok:i,data:u,msg:p},d));case 9:case"end":return o.stop()}}),o)})))()},updateQRcode:function(t){i.toDataURL(t||this.cryptoAccountInfo.address).then((function(t){var e=document.querySelector(".QRcode");e&&e.setAttribute("src",t)}))}}},p={computed:{isCryptoMerchant:function(){return"1"===this.$route.query.m},amICryptoMerchant:function(){return 1===this.$root.userInfo.BusinessStatus},ApiPath:function(){return this.isCryptoMerchant?"Business":""},BuyerApiPath:function(){return this.isCryptoMerchant&&this.amICryptoMerchant?"Business":""}}},d={data:function(){return{countdown:0,orderType:"TronDeposit",form:{paymentType:"",amount:""},orderInfo:{userId:null,paymentType:"",amount:"",passageType:"",receivingAddress:"",copeAmount:0,createDate:"",status:"",createTime:"",updateTime:"",orderId:0,orderNo:""}}},computed:{isTrading:function(){return!!this.orderInfo.orderId}},created:function(){this.getDepositDetail(this.isBuyVb)},methods:{getDepositDetail:function(){var t=arguments,e=this;return(0,s.Z)(regeneratorRuntime.mark((function o(){var r,n,s,i,c,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r=t.length>0&&void 0!==t[0]&&t[0],o.next=3,(0,a.IA)({orderType:e.orderType});case 3:n=o.sent,s=n.ok,i=n.data,c=n.msg,s?i&&(e.$set(e,"orderInfo",i.order),e.form.amount=r?i.order.amount:i.order.copeAmount,e.form.paymentType=i.order.paymentType,e.cryptoAccountInfo.address=i.order.receivingAddress,e.cryptoAccountInfo.otcTicker=parseFloat(String(i.order.amount/i.order.copeAmount)).toFixed(2),e.updateQRcode(),i.currentStateExpireTime&&(i.currentStateExpireTime.expire?(e.countdown=1e3*i.currentStateExpireTime.expire-e.$root.getServerTime(),e.countdown>0&&(u=setTimeout((function(){return e.getDepositDetail(r)}),5e3),e.$once("hook:beforeDestroy",(function(){return clearTimeout(u)})))):e.countdown=0)):e.$toast(c);case 8:case"end":return o.stop()}}),o)})))()}}},l={computed:{isMerchant:function(){return"1"===this.$route.query.m||"merchant"===this.$route.params.type},hideAlipayWechat:function(){return this.isMerchant&&!this.$root.isMerchantAlipayWechatOpen},hideAlipayWechatAtMerchantPage:function(){return!this.$root.isMerchantAlipayWechatOpen},payments:function(){return this.isMerchant?this.$root.merchantPayments:this.$root.payments}}}}}]);
//# sourceMappingURL=7253.8a0047ab.js.map