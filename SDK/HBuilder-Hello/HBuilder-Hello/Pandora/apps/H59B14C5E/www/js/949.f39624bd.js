"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[949],{40949:function(s,o,t){t.r(o),t.d(o,{default:function(){return w}});var e=function(){var s=this,o=s.$createElement,t=s._self._c||o;return t("div",{staticClass:"page page-user-pay-psw"},[t("van-form",{on:{submit:s.onSubmit}},[s.$root.userInfo.secPasswordStatus?t("div",{staticClass:"form-item"},[t("div",{staticClass:"label"},[s._v("旧密码")]),t("van-field",{attrs:{type:s.showPsw?"digit":"password",autocomplete:"new-password",maxlength:"6",focusable:"true",placeholder:"请输入原密码"},model:{value:s.form.oldSecPassword,callback:function(o){s.$set(s.form,"oldSecPassword",o)},expression:"form.oldSecPassword"}},[t("van-button",{staticClass:"btn",attrs:{slot:"extra",icon:s.showPsw?"eye-o":"closed-eye","native-type":"button",size:"mini"},on:{click:function(o){s.showPsw=!s.showPsw}},slot:"extra"})],1),t("div",{staticClass:"tip"},[s._v("资金密码为6位纯数字")])],1):s._e(),t("div",{staticClass:"form-item"},[t("div",{staticClass:"label"},[s._v("新密码")]),t("van-field",{attrs:{type:s.showPsw2?"digit":"password",autocomplete:"new-password",maxlength:"6",focusable:"true",placeholder:"请输入新密码"},model:{value:s.form.newSecPassword,callback:function(o){s.$set(s.form,"newSecPassword",o)},expression:"form.newSecPassword"}},[t("van-button",{staticClass:"btn",attrs:{slot:"extra",icon:s.showPsw2?"eye-o":"closed-eye","native-type":"button",size:"mini"},on:{click:function(o){s.showPsw2=!s.showPsw2}},slot:"extra"})],1),t("div",{staticClass:"tip"},[s._v("资金密码为6位纯数字")])],1),t("div",{staticClass:"form-item"},[t("div",{staticClass:"label"},[s._v("确认新密码")]),t("van-field",{attrs:{type:s.showPsw3?"digit":"password",autocomplete:"new-password",maxlength:"6",focusable:"true",placeholder:"请确认新密码"},model:{value:s.form.confirmSecPassword,callback:function(o){s.$set(s.form,"confirmSecPassword",o)},expression:"form.confirmSecPassword"}},[t("van-button",{staticClass:"btn",attrs:{slot:"extra",icon:s.showPsw3?"eye-o":"closed-eye","native-type":"button",size:"mini"},on:{click:function(o){s.showPsw3=!s.showPsw3}},slot:"extra"})],1),t("div",{staticClass:"tip"},[s._v("资金密码为6位纯数字")])],1),t("van-button",{staticClass:"primary block",class:{disabled:!s.form.newSecPassword||!s.form.confirmSecPassword||!!s.$root.userInfo.secPasswordStatus&&!s.form.oldSecPassword},attrs:{"native-type":"submit"}},[s._v(" 确定 ")])],1),t("van-dialog",{staticClass:"warning",attrs:{"close-on-click-overlay":"","show-cancel-button":""},on:{confirm:s.onConfirm},scopedSlots:s._u([{key:"title",fn:function(){return[t("van-icon",{attrs:{name:"fail"}})]},proxy:!0}]),model:{value:s.showFailDialog,callback:function(o){s.showFailDialog=o},expression:"showFailDialog"}},[s._v(" 为保障你的资金安全，资金密码修改后 "),t("span",[s._v("2小时")]),s._v(" 以内不允许交易 ")])],1)},a=[],r=(t(74916),t(77601),t(53045)),i={data:function(){return{showFailDialog:!1,form:{oldSecPassword:"",newSecPassword:"",confirmSecPassword:""},showPsw:!1,showPsw2:!1,showPsw3:!1}},created:function(){this.$root.$emit("root:set-topbar",["left-back"]),this.$root.$emit("root:set-title",this.$root.userInfo.secPasswordStatus?" 修改资金密码":"设置资金密码")},methods:{onSubmit:function(){return/^\d{6}$/.test(this.form.newSecPassword)?this.form.newSecPassword!=this.form.confirmSecPassword?this.$toast.fail("两次输入的密码不一致"):void(this.$root.userInfo.secPasswordStatus?this.showFailDialog=!0:this.onConfirm()):this.$toast.fail("请输入6位数字资金密码")},onConfirm:function(){var s=this;this.$root.userInfo.secPasswordStatus?(0,r.IG)({oldSecPassword:this.form.oldSecPassword,newSecPassword:this.form.newSecPassword}).then((function(o){var t=o.ok,e=o.msg;t?(s.$toast.success(e),s.$router.back()):s.$toast.fail(e)})):(0,r.MC)({securePassword:this.form.newSecPassword}).then((function(o){var t=o.ok,e=o.msg;t?(s.$root.userInfo.secPasswordStatus=!0,s.$toast.success(e),s.$router.back()):s.$toast.fail(e)}))}}},n=i,c=t(1001),l=(0,c.Z)(n,e,a,!1,null,null,null),w=l.exports}}]);
//# sourceMappingURL=949.f39624bd.js.map