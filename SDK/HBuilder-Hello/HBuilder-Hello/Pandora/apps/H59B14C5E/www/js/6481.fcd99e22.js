"use strict";(self["webpackChunkez_pay"]=self["webpackChunkez_pay"]||[]).push([[6481],{96481:function(t,e,n){n.r(e),n.d(e,{default:function(){return h}});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page page-messages"},[n("van-list",{attrs:{"error-text":t.errorText,error:t.error,finished:t.finished,"finished-text":"暂无更多消息"},on:{"update:error":function(e){t.error=e},load:t.loadList},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("van-checkbox-group",{on:{change:t.onCheckboxGroupChange},model:{value:t.deleteList,callback:function(e){t.deleteList=e},expression:"deleteList"}},t._l(t.list,(function(e,i){return n("van-cell",{key:i,class:{disabled:"Read"===e.status},attrs:{label:t._f("dateFormat")(e.createTime,"Y-M-D"),title:e.title,clickable:"","is-link":""},on:{click:function(){return t.handlerClickMsg(e)}}},[n("template",{slot:"icon"},[n("van-checkbox",{attrs:{name:e.contentId},nativeOn:{click:function(t){return t.stopPropagation(),function(t){}.apply(null,arguments)}}})],1)],2)})),1)],1)],1)},a=[],o=n(26982),s=n(7067),r=n(49749),l=(n(69600),n(85827),n(41539),n(57327),n(21249),n(53045)),c={data:function(){return{loading:!1,error:!1,finished:!1,errorText:"加载失败，点击重试",list:[],page:1,pageSize:20,deleteList:[]}},created:function(){this.setTopBar()},methods:{setTopBar:function(t){var e=this;t?this.$root.$emit("root:set-topbar",["left-back","custom-btn"],{label:"一键删除",onClick:function(){(0,l.qP)({contentId:e.deleteList.join(",")}).then((function(t){var n=t.ok,i=t.msg;if(n){var a=e.deleteList.reduce((function(t,e){return(0,r.Z)((0,r.Z)({},t),{},(0,s.Z)({},e,1))}),{});e.list=e.list.filter((function(t){return!a[t.contentId]})),e.deleteList=[]}else e.$toast.fail(i)}))}}):this.$root.$emit("root:set-topbar",["left-back","custom-btn"],{label:"一键已读",onClick:function(){(0,l.Mj)().then((function(t){var n=t.ok,i=t.msg;n?e.list.map((function(t){return t.status="Read",t})):e.$toast.fail(i)}))}})},onCheckboxGroupChange:function(){this.deleteList.length?this.setTopBar(!0):this.setTopBar()},loadList:function(){var t=this;(0,l._U)({page:this.page,pageSize:this.pageSize}).then((function(e){var n=e.ok,i=e.data,a=e.msg;if(t.loading=!1,n){var s;if(1===t.page)t.list=i.list||[];else(s=t.list).push.apply(s,(0,o.Z)(i.list||[]));t.finished=t.page*t.pageSize>=i.total,t.page+=1}else t.error=!0,t.errorText=a}))},handlerClickMsg:function(t){var e=this,n=t.status,i=t.contentId,a=t.content;"Unread"===n?(0,l.$h)({contentId:i}).then((function(t){var n=t.ok,i=t.msg;n?(e.$st.set("MSG_CONTENT",a),e.$router.push("/msg_detail")):e.$toast.fail(i)})):(this.$st.set("MSG_CONTENT",a),this.$router.push("/msg_detail"))}}},u=c,d=n(1001),f=(0,d.Z)(u,i,a,!1,null,null,null),h=f.exports}}]);
//# sourceMappingURL=6481.fcd99e22.js.map