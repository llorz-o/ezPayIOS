{"version":3,"file":"js/3675.684f14ea.js","mappings":"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","sources":["webpack://ez_pay/./src/views/payments/banks/index.vue?631c","webpack://ez_pay/src/views/payments/banks/index.vue","webpack://ez_pay/./src/views/payments/banks/index.vue?d0f7","webpack://ez_pay/./src/views/payments/banks/index.vue","webpack://ez_pay/./src/vendor/globalVerify.js","webpack://ez_pay/./src/vendor/mixins.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page page-banks\"},[_c('div',{staticClass:\"titles\"},[_c('div',{staticClass:\"num\"},[_vm._v(\" 我的银行卡 \"),_c('span',{staticClass:\"secondary\"},[_vm._v(\" （共\"+_vm._s(_vm.bank.list.length)+\"张） \")])]),_c('van-button',{attrs:{\"icon\":\"plus\",\"icon-position\":\"left\",\"replace\":\"\",\"to\":(\"/add_payment/1\" + (_vm.isMerchant ? '?m=1' : ''))}},[_vm._v(\" 添加银行卡 \")])],1),_c('div',{staticClass:\"collection\"},_vm._l((_vm.bank.list),function(item,index){return _c('van-swipe-cell',{key:index,scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{attrs:{\"square\":\"\",\"text\":\"解绑\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.unbind(item.id)}}})]},proxy:true}],null,true)},[_c('div',{class:(\"card bg\" + index)},[_c('van-image',{attrs:{\"src\":_vm.$root.getImageUrl(item.logoImg),\"round\":\"\"}}),_c('div',{staticClass:\"bankInfo\"},[_c('div',{staticClass:\"top\"},[_c('span',{staticClass:\"bankName\"},[_vm._v(\" \"+_vm._s(_vm.bankIdMappingName[item.bankId])+\" \")]),_c('span',{staticClass:\"bankNum\"},[_vm._v(\" ****\"+_vm._s(item.bankNo.slice(-4))+\" \")])]),_c('div',{staticClass:\"bankStatus\"},[_vm._v(\"可转账\")])])],1)])}),1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page page-banks\">\n    <div class=\"titles\">\n      <div class=\"num\">\n        我的银行卡\n        <span class=\"secondary\"> （共{{ bank.list.length }}张） </span>\n      </div>\n      <van-button icon=\"plus\" icon-position=\"left\" replace :to=\"`/add_payment/1${isMerchant ? '?m=1' : ''}`\">\n        添加银行卡\n      </van-button>\n    </div>\n    <div class=\"collection\">\n      <van-swipe-cell v-for=\"(item, index) in bank.list\" :key=\"index\">\n        <div :class=\"`card bg${index}`\">\n          <van-image :src=\"$root.getImageUrl(item.logoImg)\" round></van-image>\n          <div class=\"bankInfo\">\n            <div class=\"top\">\n              <span class=\"bankName\"> {{ bankIdMappingName[item.bankId] }} </span>\n              <span class=\"bankNum\"> ****{{ item.bankNo.slice(-4) }} </span>\n            </div>\n            <div class=\"bankStatus\">可转账</div>\n          </div>\n        </div>\n        <template #right>\n          <van-button square text=\"解绑\" type=\"danger\" @click=\"unbind(item.id)\"/>\n        </template>\n      </van-swipe-cell>\n    </div>\n  </div>\n</template>\n\n\n<script>\nimport {unBind} from \"@/apis/user\"\nimport {verifyGoogleAuth, verifySecuretedCode} from \"@/vendor/globalVerify\";\nimport { cryptoPaymentsMixins } from '@/vendor/mixins';\n\nexport default {\n  mixins: [cryptoPaymentsMixins],\n  computed: {\n    bank() {\n      return this.payments.bank;\n    },\n    bankIdMappingName() {\n      return this.$root.banks.reduce(\n        (previous, current) => ({\n          ...previous,\n          [current.bankId]: current.bankName,\n        }),\n        {}\n      );\n    },\n  },\n  created() {\n    this.$root.$emit(\"root:set-topbar\", [\n      \"left-back\",\n      \"notices\",\n      \"customer-service\",\n    ]);\n  },\n  methods: {\n    async unbind(id) {\n      const isPassed = await verifyGoogleAuth(this)\n      if(!isPassed) return\n      const securePassword = await verifySecuretedCode(this)\n      if (securePassword && securePassword.length === 6) {\n        const {ok, msg} = await unBind({id, securePassword})\n        if (ok) {\n          this.$root.loadPayments()\n        } else {\n          this.$toast.fail(msg)\n        }\n      }\n    }\n  },\n};\n</script>\n\n\n<style lang=\"scss\">\n.page.page-banks {\n  overflow-y: auto;\n\n  .titles {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 10px 15px;\n\n    .num {\n      font-size: 14px;\n      font-weight: 600;\n      color: #333333;\n\n      .secondary {\n        color: #999999;\n      }\n    }\n\n    .van-button {\n      font-size: 12px;\n      // width: 90px;\n      height: 20px;\n\n      .van-button__content {\n        line-height: 20px;\n      }\n\n      .van-button__text {\n        line-height: 1;\n      }\n\n      border-radius: 10px;\n      color: #6f5bfe;\n      background-color: #6e5bfe75;\n    }\n  }\n\n  .collection {\n    padding: 10px 15px;\n  }\n\n  .van-swipe-cell__right {\n    .van-button {\n      height: inherit;\n    }\n  }\n\n  .card {\n    display: flex;\n    align-items: center;\n    padding: 0 12px;\n    height: 80px;\n    // border-radius: 10px;\n    margin-bottom: 10px;\n\n    &.bg0 {\n      background: linear-gradient(90deg, #4faca2, #3b96b7);\n    }\n\n    &.bg1 {\n      background: linear-gradient(90deg, #fd5660, #fe7465);\n    }\n\n    &.bg2 {\n      background: linear-gradient(90deg, #ff7a43, #faa353);\n    }\n\n    &.bg3 {\n      background: linear-gradient(90deg, #4579e6, #6797fb);\n    }\n\n    &.bg4 {\n      background: linear-gradient(90deg, #10bf7a, #3fc69d);\n    }\n\n    // &:not(:first-child) {\n    //   margin-top: -15px;\n    // }\n    .van-image {\n      width: 35px;\n      height: 35px;\n      margin-right: 8px;\n    }\n\n    .bankInfo {\n      flex: 1;\n      color: #fff;\n\n      .top {\n        display: flex;\n        align-items: center;\n        font-weight: 600;\n        font-size: 15px;\n\n        .bankNum {\n          margin-left: auto;\n        }\n      }\n\n      .bankStatus {\n        margin-top: 5px;\n        font-size: 12px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[0]!../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=755fc1b2&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import {checkGoogleAuthenticator} from \"@/apis/user\";\n\nexport const verifySecuretedCode = vm => {\n  vm.$toast('请输入资金密码')\n  return new Promise((resolve, reject) => {\n    vm.$root.showPassowordKeyboard = true\n    vm.$root.$once('root:global-password', async code => resolve(code))\n  })\n}\n\nexport const verifyGoogleAuth = (vm) => {\n  if (vm.$root.userInfo && vm.$root.userInfo.isGoogleAuthenticator) {\n    vm.$toast('请输入Google安全码')\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        vm.$root.showPassowordKeyboard = true\n        vm.$root.$once('root:global-password', async code => {\n          if (!code || code === 'close-by-route-change') return resolve(false)\n          const {ok, msg} = await checkGoogleAuthenticator({safeCode: code})\n          if (ok) {\n            resolve(true)\n          } else {\n            resolve(false)\n            vm.$toast.fail(msg)\n          }\n        })\n      }, 0)\n    })\n  } else {\n    return Promise.resolve(true)\n  }\n\n}\n","import { businessGetAccountInfo, getDepositDetail } from \"@/apis/crypto\";\nimport QRCode from \"qrcode\";\n\nexport const cryptoMixins = {\n  data() {\n    return {\n      cryptoAccountInfo: {\n        address: \"\",\n        otcTicker: \"\",\n      },\n    };\n  },\n  methods: {\n    // 查询币种信息\n    async businessGetAccountInfo(val) {\n      const { ok, data, msg, ...rest } = await businessGetAccountInfo({ type: val });\n      if (ok) {\n        this.cryptoAccountInfo = data;\n        this.updateQRcode();\n      } else {\n        this.$toast(msg);\n      }\n\n      return { ok, data, msg, ...rest };\n    },\n    // 更新二维码\n    updateQRcode(str) {\n      QRCode.toDataURL(str || this.cryptoAccountInfo.address).then((url) => {\n        const $QRcode = document.querySelector(\".QRcode\");\n        $QRcode && $QRcode.setAttribute(\"src\", url);\n      });\n    },\n  },\n};\n\nexport const cryptoMerchantMixins = {\n  computed: {\n    isCryptoMerchant() {\n      return this.$route.query.m === \"1\";\n    },\n    amICryptoMerchant() {\n      return this.$root.userInfo.BusinessStatus === 1;\n    },\n    ApiPath() {\n      return this.isCryptoMerchant ? \"Business\" : \"\";\n    },\n    BuyerApiPath() {\n      // 一个商家单，普通用户买调用普通的，商家买调用商家的\n      // 一个普通单，都调用普通的\n      // 一个商家单，商家卖调用商家的，普通用户没有商家卖单\n      return this.isCryptoMerchant && this.amICryptoMerchant ? \"Business\" : \"\";\n    },\n  },\n};\n\nexport const cryptoTradingMixins = {\n  data() {\n    return {\n      countdown: 0,\n      orderType: \"TronDeposit\",\n      form: {\n        paymentType: \"\",\n        amount: \"\",\n      },\n      orderInfo: {\n        userId: null,\n        paymentType: \"\",\n        amount: \"\",\n        passageType: \"\",\n        receivingAddress: \"\",\n        copeAmount: 0,\n        createDate: \"\",\n        status: \"\",\n        createTime: \"\",\n        updateTime: \"\",\n        orderId: 0,\n        orderNo: \"\",\n      },\n    };\n  },\n  computed: {\n    isTrading() {\n      return !!this.orderInfo.orderId;\n    },\n  },\n  created() {\n    this.getDepositDetail(this.isBuyVb); //isBuyVb 区分区块链交易 取值amount\n  },\n  methods: {\n    // 检查存续订单\n    async getDepositDetail(isBuyVb = false) {\n      //是否购买V币  true amount为amount  否则 copeAmount\n      const { ok, data, msg } = await getDepositDetail({ orderType: this.orderType });\n      if (ok) {\n        if (data) {\n          // 有未完成的订单\n          this.$set(this, \"orderInfo\", data.order);\n          this.form.amount = isBuyVb ? data.order.amount : data.order.copeAmount;\n          this.form.paymentType = data.order.paymentType;\n          this.cryptoAccountInfo.address = data.order.receivingAddress;\n          this.cryptoAccountInfo.otcTicker = parseFloat(\n            String(data.order.amount / data.order.copeAmount)\n          ).toFixed(2);\n          this.updateQRcode();\n          // 订单超时\n          if (data.currentStateExpireTime) {\n            if (data.currentStateExpireTime.expire) {\n              this.countdown =\n                data.currentStateExpireTime.expire * 1000 - this.$root.getServerTime();\n              if (this.countdown > 0) {\n                const timer = setTimeout(() => this.getDepositDetail(isBuyVb), 5000);\n                this.$once(\"hook:beforeDestroy\", () => clearTimeout(timer));\n              }\n            } else {\n              this.countdown = 0;\n            }\n          }\n        } else {\n          // 没有未完成的订单\n        }\n      } else {\n        this.$toast(msg);\n      }\n    },\n  },\n};\n\nexport const cryptoPaymentsMixins = {\n  computed: {\n    isMerchant() {\n      return this.$route.query.m === \"1\" || this.$route.params.type === \"merchant\";\n    },\n    hideAlipayWechat() {\n      return this.isMerchant && !this.$root.isMerchantAlipayWechatOpen;\n    },\n    hideAlipayWechatAtMerchantPage() {\n      return !this.$root.isMerchantAlipayWechatOpen;\n    },\n    payments() {\n      return this.isMerchant ? this.$root.merchantPayments : this.$root.payments;\n    },\n  },\n};\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","bank","list","length","attrs","isMerchant","_l","item","index","key","scopedSlots","_u","fn","on","$event","unbind","id","proxy","class","$root","getImageUrl","logoImg","bankIdMappingName","bankId","bankNo","slice","staticRenderFns","mixins","computed","previous","current","created","methods","_context","verifyGoogleAuth","isPassed","verifySecuretedCode","securePassword","unBind","_yield$unBind","ok","msg","_this","component","vm","$toast","Promise","resolve","reject","showPassowordKeyboard","$once","_ref","_asyncToGenerator","regeneratorRuntime","mark","_callee","code","wrap","prev","next","abrupt","stop","_x","apply","arguments","userInfo","isGoogleAuthenticator","setTimeout","_ref2","_callee2","_yield$checkGoogleAut","_context2","checkGoogleAuthenticator","safeCode","sent","fail","_x2","cryptoMixins","data","cryptoAccountInfo","address","otcTicker","businessGetAccountInfo","val","_yield$_businessGetAc","rest","type","_objectWithoutProperties","_excluded","updateQRcode","_objectSpread","str","QRCode","then","url","$QRcode","document","querySelector","setAttribute","cryptoMerchantMixins","isCryptoMerchant","$route","query","m","amICryptoMerchant","BusinessStatus","ApiPath","BuyerApiPath","cryptoTradingMixins","countdown","orderType","form","paymentType","amount","orderInfo","userId","passageType","receivingAddress","copeAmount","createDate","status","createTime","updateTime","orderId","orderNo","isTrading","getDepositDetail","isBuyVb","_arguments","_this2","_yield$_getDepositDet","timer","undefined","$set","order","parseFloat","String","toFixed","currentStateExpireTime","expire","getServerTime","clearTimeout","cryptoPaymentsMixins","params","hideAlipayWechat","isMerchantAlipayWechatOpen","hideAlipayWechatAtMerchantPage","payments","merchantPayments"],"sourceRoot":""}